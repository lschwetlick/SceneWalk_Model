


<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
    <title>Coverage for scenewalk_model_object.py: 93%</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jquery.hotkeys.js"></script>
    <script type="text/javascript" src="jquery.isonscreen.js"></script>
    <script type="text/javascript" src="coverage_html.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(coverage.pyfile_ready);
    </script>
</head>
<body class="pyfile">

<div id="header">
    <div class="content">
        <h1>Coverage for <b>scenewalk_model_object.py</b> :
            <span class="pc_cov">93%</span>
        </h1>

        <img id="keyboard_icon" src="keybd_closed.png" alt="Show keyboard shortcuts" />

        <h2 class="stats">
            522 statements &nbsp;
            <span class="run hide_run shortkey_r button_toggle_run">486 run</span>
            <span class="mis shortkey_m button_toggle_mis">36 missing</span>
            <span class="exc shortkey_x button_toggle_exc">0 excluded</span>

            
        </h2>
    </div>
</div>

<div class="help_panel">
    <img id="panel_icon" src="keybd_open.png" alt="Hide keyboard shortcuts" />
    <p class="legend">Hot-keys on this page</p>
    <div>
    <p class="keyhelp">
        <span class="key">r</span>
        <span class="key">m</span>
        <span class="key">x</span>
        <span class="key">p</span> &nbsp; toggle line displays
    </p>
    <p class="keyhelp">
        <span class="key">j</span>
        <span class="key">k</span> &nbsp; next/prev highlighted chunk
    </p>
    <p class="keyhelp">
        <span class="key">0</span> &nbsp; (zero) top of page
    </p>
    <p class="keyhelp">
        <span class="key">1</span> &nbsp; (one) first highlighted chunk
    </p>
    </div>
</div>

<div id="source">
    <table>
        <tr>
            <td class="linenos">
<p id="n1" class="pln"><a href="#n1">1</a></p>
<p id="n2" class="pln"><a href="#n2">2</a></p>
<p id="n3" class="pln"><a href="#n3">3</a></p>
<p id="n4" class="pln"><a href="#n4">4</a></p>
<p id="n5" class="pln"><a href="#n5">5</a></p>
<p id="n6" class="stm run hide_run"><a href="#n6">6</a></p>
<p id="n7" class="stm run hide_run"><a href="#n7">7</a></p>
<p id="n8" class="stm run hide_run"><a href="#n8">8</a></p>
<p id="n9" class="pln"><a href="#n9">9</a></p>
<p id="n10" class="stm run hide_run"><a href="#n10">10</a></p>
<p id="n11" class="pln"><a href="#n11">11</a></p>
<p id="n12" class="pln"><a href="#n12">12</a></p>
<p id="n13" class="pln"><a href="#n13">13</a></p>
<p id="n14" class="pln"><a href="#n14">14</a></p>
<p id="n15" class="pln"><a href="#n15">15</a></p>
<p id="n16" class="pln"><a href="#n16">16</a></p>
<p id="n17" class="pln"><a href="#n17">17</a></p>
<p id="n18" class="pln"><a href="#n18">18</a></p>
<p id="n19" class="pln"><a href="#n19">19</a></p>
<p id="n20" class="pln"><a href="#n20">20</a></p>
<p id="n21" class="pln"><a href="#n21">21</a></p>
<p id="n22" class="pln"><a href="#n22">22</a></p>
<p id="n23" class="pln"><a href="#n23">23</a></p>
<p id="n24" class="stm run hide_run"><a href="#n24">24</a></p>
<p id="n25" class="stm run hide_run"><a href="#n25">25</a></p>
<p id="n26" class="pln"><a href="#n26">26</a></p>
<p id="n27" class="stm run hide_run"><a href="#n27">27</a></p>
<p id="n28" class="pln"><a href="#n28">28</a></p>
<p id="n29" class="pln"><a href="#n29">29</a></p>
<p id="n30" class="pln"><a href="#n30">30</a></p>
<p id="n31" class="pln"><a href="#n31">31</a></p>
<p id="n32" class="pln"><a href="#n32">32</a></p>
<p id="n33" class="pln"><a href="#n33">33</a></p>
<p id="n34" class="pln"><a href="#n34">34</a></p>
<p id="n35" class="pln"><a href="#n35">35</a></p>
<p id="n36" class="pln"><a href="#n36">36</a></p>
<p id="n37" class="pln"><a href="#n37">37</a></p>
<p id="n38" class="pln"><a href="#n38">38</a></p>
<p id="n39" class="pln"><a href="#n39">39</a></p>
<p id="n40" class="stm run hide_run"><a href="#n40">40</a></p>
<p id="n41" class="stm run hide_run"><a href="#n41">41</a></p>
<p id="n42" class="pln"><a href="#n42">42</a></p>
<p id="n43" class="pln"><a href="#n43">43</a></p>
<p id="n44" class="stm run hide_run"><a href="#n44">44</a></p>
<p id="n45" class="stm run hide_run"><a href="#n45">45</a></p>
<p id="n46" class="pln"><a href="#n46">46</a></p>
<p id="n47" class="stm run hide_run"><a href="#n47">47</a></p>
<p id="n48" class="pln"><a href="#n48">48</a></p>
<p id="n49" class="stm run hide_run"><a href="#n49">49</a></p>
<p id="n50" class="stm run hide_run"><a href="#n50">50</a></p>
<p id="n51" class="pln"><a href="#n51">51</a></p>
<p id="n52" class="stm run hide_run"><a href="#n52">52</a></p>
<p id="n53" class="pln"><a href="#n53">53</a></p>
<p id="n54" class="stm run hide_run"><a href="#n54">54</a></p>
<p id="n55" class="stm run hide_run"><a href="#n55">55</a></p>
<p id="n56" class="pln"><a href="#n56">56</a></p>
<p id="n57" class="pln"><a href="#n57">57</a></p>
<p id="n58" class="pln"><a href="#n58">58</a></p>
<p id="n59" class="stm run hide_run"><a href="#n59">59</a></p>
<p id="n60" class="pln"><a href="#n60">60</a></p>
<p id="n61" class="stm run hide_run"><a href="#n61">61</a></p>
<p id="n62" class="stm run hide_run"><a href="#n62">62</a></p>
<p id="n63" class="pln"><a href="#n63">63</a></p>
<p id="n64" class="stm run hide_run"><a href="#n64">64</a></p>
<p id="n65" class="pln"><a href="#n65">65</a></p>
<p id="n66" class="stm run hide_run"><a href="#n66">66</a></p>
<p id="n67" class="pln"><a href="#n67">67</a></p>
<p id="n68" class="stm run hide_run"><a href="#n68">68</a></p>
<p id="n69" class="stm run hide_run"><a href="#n69">69</a></p>
<p id="n70" class="stm run hide_run"><a href="#n70">70</a></p>
<p id="n71" class="stm run hide_run"><a href="#n71">71</a></p>
<p id="n72" class="pln"><a href="#n72">72</a></p>
<p id="n73" class="stm run hide_run"><a href="#n73">73</a></p>
<p id="n74" class="stm run hide_run"><a href="#n74">74</a></p>
<p id="n75" class="stm run hide_run"><a href="#n75">75</a></p>
<p id="n76" class="stm run hide_run"><a href="#n76">76</a></p>
<p id="n77" class="stm run hide_run"><a href="#n77">77</a></p>
<p id="n78" class="stm run hide_run"><a href="#n78">78</a></p>
<p id="n79" class="stm run hide_run"><a href="#n79">79</a></p>
<p id="n80" class="stm run hide_run"><a href="#n80">80</a></p>
<p id="n81" class="stm run hide_run"><a href="#n81">81</a></p>
<p id="n82" class="stm run hide_run"><a href="#n82">82</a></p>
<p id="n83" class="stm run hide_run"><a href="#n83">83</a></p>
<p id="n84" class="stm run hide_run"><a href="#n84">84</a></p>
<p id="n85" class="stm run hide_run"><a href="#n85">85</a></p>
<p id="n86" class="stm run hide_run"><a href="#n86">86</a></p>
<p id="n87" class="stm run hide_run"><a href="#n87">87</a></p>
<p id="n88" class="stm run hide_run"><a href="#n88">88</a></p>
<p id="n89" class="pln"><a href="#n89">89</a></p>
<p id="n90" class="stm run hide_run"><a href="#n90">90</a></p>
<p id="n91" class="pln"><a href="#n91">91</a></p>
<p id="n92" class="stm run hide_run"><a href="#n92">92</a></p>
<p id="n93" class="stm mis"><a href="#n93">93</a></p>
<p id="n94" class="pln"><a href="#n94">94</a></p>
<p id="n95" class="pln"><a href="#n95">95</a></p>
<p id="n96" class="pln"><a href="#n96">96</a></p>
<p id="n97" class="stm run hide_run"><a href="#n97">97</a></p>
<p id="n98" class="pln"><a href="#n98">98</a></p>
<p id="n99" class="pln"><a href="#n99">99</a></p>
<p id="n100" class="pln"><a href="#n100">100</a></p>
<p id="n101" class="stm run hide_run"><a href="#n101">101</a></p>
<p id="n102" class="pln"><a href="#n102">102</a></p>
<p id="n103" class="pln"><a href="#n103">103</a></p>
<p id="n104" class="pln"><a href="#n104">104</a></p>
<p id="n105" class="pln"><a href="#n105">105</a></p>
<p id="n106" class="pln"><a href="#n106">106</a></p>
<p id="n107" class="pln"><a href="#n107">107</a></p>
<p id="n108" class="pln"><a href="#n108">108</a></p>
<p id="n109" class="pln"><a href="#n109">109</a></p>
<p id="n110" class="pln"><a href="#n110">110</a></p>
<p id="n111" class="pln"><a href="#n111">111</a></p>
<p id="n112" class="pln"><a href="#n112">112</a></p>
<p id="n113" class="pln"><a href="#n113">113</a></p>
<p id="n114" class="pln"><a href="#n114">114</a></p>
<p id="n115" class="pln"><a href="#n115">115</a></p>
<p id="n116" class="pln"><a href="#n116">116</a></p>
<p id="n117" class="pln"><a href="#n117">117</a></p>
<p id="n118" class="stm run hide_run"><a href="#n118">118</a></p>
<p id="n119" class="pln"><a href="#n119">119</a></p>
<p id="n120" class="stm run hide_run"><a href="#n120">120</a></p>
<p id="n121" class="pln"><a href="#n121">121</a></p>
<p id="n122" class="pln"><a href="#n122">122</a></p>
<p id="n123" class="stm run hide_run"><a href="#n123">123</a></p>
<p id="n124" class="stm run hide_run"><a href="#n124">124</a></p>
<p id="n125" class="stm run hide_run"><a href="#n125">125</a></p>
<p id="n126" class="stm run hide_run"><a href="#n126">126</a></p>
<p id="n127" class="stm run hide_run"><a href="#n127">127</a></p>
<p id="n128" class="stm run hide_run"><a href="#n128">128</a></p>
<p id="n129" class="stm run hide_run"><a href="#n129">129</a></p>
<p id="n130" class="stm run hide_run"><a href="#n130">130</a></p>
<p id="n131" class="pln"><a href="#n131">131</a></p>
<p id="n132" class="stm run hide_run"><a href="#n132">132</a></p>
<p id="n133" class="stm run hide_run"><a href="#n133">133</a></p>
<p id="n134" class="stm run hide_run"><a href="#n134">134</a></p>
<p id="n135" class="stm run hide_run"><a href="#n135">135</a></p>
<p id="n136" class="stm run hide_run"><a href="#n136">136</a></p>
<p id="n137" class="stm run hide_run"><a href="#n137">137</a></p>
<p id="n138" class="stm run hide_run"><a href="#n138">138</a></p>
<p id="n139" class="stm run hide_run"><a href="#n139">139</a></p>
<p id="n140" class="stm run hide_run"><a href="#n140">140</a></p>
<p id="n141" class="stm run hide_run"><a href="#n141">141</a></p>
<p id="n142" class="stm run hide_run"><a href="#n142">142</a></p>
<p id="n143" class="stm run hide_run"><a href="#n143">143</a></p>
<p id="n144" class="stm run hide_run"><a href="#n144">144</a></p>
<p id="n145" class="pln"><a href="#n145">145</a></p>
<p id="n146" class="stm run hide_run"><a href="#n146">146</a></p>
<p id="n147" class="pln"><a href="#n147">147</a></p>
<p id="n148" class="stm mis"><a href="#n148">148</a></p>
<p id="n149" class="stm mis"><a href="#n149">149</a></p>
<p id="n150" class="stm mis"><a href="#n150">150</a></p>
<p id="n151" class="stm mis"><a href="#n151">151</a></p>
<p id="n152" class="stm mis"><a href="#n152">152</a></p>
<p id="n153" class="stm mis"><a href="#n153">153</a></p>
<p id="n154" class="stm mis"><a href="#n154">154</a></p>
<p id="n155" class="stm mis"><a href="#n155">155</a></p>
<p id="n156" class="stm mis"><a href="#n156">156</a></p>
<p id="n157" class="stm mis"><a href="#n157">157</a></p>
<p id="n158" class="pln"><a href="#n158">158</a></p>
<p id="n159" class="stm run hide_run"><a href="#n159">159</a></p>
<p id="n160" class="pln"><a href="#n160">160</a></p>
<p id="n161" class="stm run hide_run"><a href="#n161">161</a></p>
<p id="n162" class="pln"><a href="#n162">162</a></p>
<p id="n163" class="pln"><a href="#n163">163</a></p>
<p id="n164" class="pln"><a href="#n164">164</a></p>
<p id="n165" class="pln"><a href="#n165">165</a></p>
<p id="n166" class="pln"><a href="#n166">166</a></p>
<p id="n167" class="pln"><a href="#n167">167</a></p>
<p id="n168" class="stm run hide_run"><a href="#n168">168</a></p>
<p id="n169" class="stm run hide_run"><a href="#n169">169</a></p>
<p id="n170" class="stm run hide_run"><a href="#n170">170</a></p>
<p id="n171" class="stm run hide_run"><a href="#n171">171</a></p>
<p id="n172" class="pln"><a href="#n172">172</a></p>
<p id="n173" class="stm run hide_run"><a href="#n173">173</a></p>
<p id="n174" class="stm run hide_run"><a href="#n174">174</a></p>
<p id="n175" class="stm run hide_run"><a href="#n175">175</a></p>
<p id="n176" class="stm run hide_run"><a href="#n176">176</a></p>
<p id="n177" class="pln"><a href="#n177">177</a></p>
<p id="n178" class="stm run hide_run"><a href="#n178">178</a></p>
<p id="n179" class="stm run hide_run"><a href="#n179">179</a></p>
<p id="n180" class="stm run hide_run"><a href="#n180">180</a></p>
<p id="n181" class="stm run hide_run"><a href="#n181">181</a></p>
<p id="n182" class="stm run hide_run"><a href="#n182">182</a></p>
<p id="n183" class="stm run hide_run"><a href="#n183">183</a></p>
<p id="n184" class="stm run hide_run"><a href="#n184">184</a></p>
<p id="n185" class="pln"><a href="#n185">185</a></p>
<p id="n186" class="stm run hide_run"><a href="#n186">186</a></p>
<p id="n187" class="pln"><a href="#n187">187</a></p>
<p id="n188" class="stm run hide_run"><a href="#n188">188</a></p>
<p id="n189" class="stm run hide_run"><a href="#n189">189</a></p>
<p id="n190" class="stm run hide_run"><a href="#n190">190</a></p>
<p id="n191" class="pln"><a href="#n191">191</a></p>
<p id="n192" class="stm run hide_run"><a href="#n192">192</a></p>
<p id="n193" class="stm run hide_run"><a href="#n193">193</a></p>
<p id="n194" class="stm mis"><a href="#n194">194</a></p>
<p id="n195" class="pln"><a href="#n195">195</a></p>
<p id="n196" class="stm run hide_run"><a href="#n196">196</a></p>
<p id="n197" class="stm run hide_run"><a href="#n197">197</a></p>
<p id="n198" class="stm run hide_run"><a href="#n198">198</a></p>
<p id="n199" class="stm run hide_run"><a href="#n199">199</a></p>
<p id="n200" class="stm run hide_run"><a href="#n200">200</a></p>
<p id="n201" class="stm run hide_run"><a href="#n201">201</a></p>
<p id="n202" class="stm run hide_run"><a href="#n202">202</a></p>
<p id="n203" class="stm run hide_run"><a href="#n203">203</a></p>
<p id="n204" class="stm run hide_run"><a href="#n204">204</a></p>
<p id="n205" class="stm run hide_run"><a href="#n205">205</a></p>
<p id="n206" class="stm run hide_run"><a href="#n206">206</a></p>
<p id="n207" class="stm run hide_run"><a href="#n207">207</a></p>
<p id="n208" class="pln"><a href="#n208">208</a></p>
<p id="n209" class="stm run hide_run"><a href="#n209">209</a></p>
<p id="n210" class="pln"><a href="#n210">210</a></p>
<p id="n211" class="pln"><a href="#n211">211</a></p>
<p id="n212" class="pln"><a href="#n212">212</a></p>
<p id="n213" class="pln"><a href="#n213">213</a></p>
<p id="n214" class="pln"><a href="#n214">214</a></p>
<p id="n215" class="pln"><a href="#n215">215</a></p>
<p id="n216" class="stm run hide_run"><a href="#n216">216</a></p>
<p id="n217" class="stm run hide_run"><a href="#n217">217</a></p>
<p id="n218" class="stm run hide_run"><a href="#n218">218</a></p>
<p id="n219" class="stm run hide_run"><a href="#n219">219</a></p>
<p id="n220" class="stm run hide_run"><a href="#n220">220</a></p>
<p id="n221" class="pln"><a href="#n221">221</a></p>
<p id="n222" class="stm run hide_run"><a href="#n222">222</a></p>
<p id="n223" class="stm run hide_run"><a href="#n223">223</a></p>
<p id="n224" class="stm run hide_run"><a href="#n224">224</a></p>
<p id="n225" class="stm run hide_run"><a href="#n225">225</a></p>
<p id="n226" class="stm mis"><a href="#n226">226</a></p>
<p id="n227" class="pln"><a href="#n227">227</a></p>
<p id="n228" class="stm run hide_run"><a href="#n228">228</a></p>
<p id="n229" class="stm run hide_run"><a href="#n229">229</a></p>
<p id="n230" class="stm run hide_run"><a href="#n230">230</a></p>
<p id="n231" class="stm run hide_run"><a href="#n231">231</a></p>
<p id="n232" class="pln"><a href="#n232">232</a></p>
<p id="n233" class="stm run hide_run"><a href="#n233">233</a></p>
<p id="n234" class="stm run hide_run"><a href="#n234">234</a></p>
<p id="n235" class="stm mis"><a href="#n235">235</a></p>
<p id="n236" class="pln"><a href="#n236">236</a></p>
<p id="n237" class="stm run hide_run"><a href="#n237">237</a></p>
<p id="n238" class="stm run hide_run"><a href="#n238">238</a></p>
<p id="n239" class="stm mis"><a href="#n239">239</a></p>
<p id="n240" class="pln"><a href="#n240">240</a></p>
<p id="n241" class="stm run hide_run"><a href="#n241">241</a></p>
<p id="n242" class="stm run hide_run"><a href="#n242">242</a></p>
<p id="n243" class="stm run hide_run"><a href="#n243">243</a></p>
<p id="n244" class="stm run hide_run"><a href="#n244">244</a></p>
<p id="n245" class="stm run hide_run"><a href="#n245">245</a></p>
<p id="n246" class="stm run hide_run"><a href="#n246">246</a></p>
<p id="n247" class="stm run hide_run"><a href="#n247">247</a></p>
<p id="n248" class="stm run hide_run"><a href="#n248">248</a></p>
<p id="n249" class="stm run hide_run"><a href="#n249">249</a></p>
<p id="n250" class="stm run hide_run"><a href="#n250">250</a></p>
<p id="n251" class="stm run hide_run"><a href="#n251">251</a></p>
<p id="n252" class="stm run hide_run"><a href="#n252">252</a></p>
<p id="n253" class="stm run hide_run"><a href="#n253">253</a></p>
<p id="n254" class="stm run hide_run"><a href="#n254">254</a></p>
<p id="n255" class="stm run hide_run"><a href="#n255">255</a></p>
<p id="n256" class="stm run hide_run"><a href="#n256">256</a></p>
<p id="n257" class="pln"><a href="#n257">257</a></p>
<p id="n258" class="stm run hide_run"><a href="#n258">258</a></p>
<p id="n259" class="stm run hide_run"><a href="#n259">259</a></p>
<p id="n260" class="stm run hide_run"><a href="#n260">260</a></p>
<p id="n261" class="stm mis"><a href="#n261">261</a></p>
<p id="n262" class="pln"><a href="#n262">262</a></p>
<p id="n263" class="stm run hide_run"><a href="#n263">263</a></p>
<p id="n264" class="stm run hide_run"><a href="#n264">264</a></p>
<p id="n265" class="stm run hide_run"><a href="#n265">265</a></p>
<p id="n266" class="stm run hide_run"><a href="#n266">266</a></p>
<p id="n267" class="stm run hide_run"><a href="#n267">267</a></p>
<p id="n268" class="stm run hide_run"><a href="#n268">268</a></p>
<p id="n269" class="pln"><a href="#n269">269</a></p>
<p id="n270" class="stm mis"><a href="#n270">270</a></p>
<p id="n271" class="stm run hide_run"><a href="#n271">271</a></p>
<p id="n272" class="stm mis"><a href="#n272">272</a></p>
<p id="n273" class="pln"><a href="#n273">273</a></p>
<p id="n274" class="stm run hide_run"><a href="#n274">274</a></p>
<p id="n275" class="stm run hide_run"><a href="#n275">275</a></p>
<p id="n276" class="stm mis"><a href="#n276">276</a></p>
<p id="n277" class="pln"><a href="#n277">277</a></p>
<p id="n278" class="stm run hide_run"><a href="#n278">278</a></p>
<p id="n279" class="pln"><a href="#n279">279</a></p>
<p id="n280" class="stm run hide_run"><a href="#n280">280</a></p>
<p id="n281" class="stm run hide_run"><a href="#n281">281</a></p>
<p id="n282" class="stm run hide_run"><a href="#n282">282</a></p>
<p id="n283" class="stm run hide_run"><a href="#n283">283</a></p>
<p id="n284" class="stm run hide_run"><a href="#n284">284</a></p>
<p id="n285" class="stm run hide_run"><a href="#n285">285</a></p>
<p id="n286" class="stm run hide_run"><a href="#n286">286</a></p>
<p id="n287" class="stm run hide_run"><a href="#n287">287</a></p>
<p id="n288" class="stm run hide_run"><a href="#n288">288</a></p>
<p id="n289" class="stm run hide_run"><a href="#n289">289</a></p>
<p id="n290" class="stm mis"><a href="#n290">290</a></p>
<p id="n291" class="stm mis"><a href="#n291">291</a></p>
<p id="n292" class="pln"><a href="#n292">292</a></p>
<p id="n293" class="stm mis"><a href="#n293">293</a></p>
<p id="n294" class="pln"><a href="#n294">294</a></p>
<p id="n295" class="pln"><a href="#n295">295</a></p>
<p id="n296" class="stm run hide_run"><a href="#n296">296</a></p>
<p id="n297" class="pln"><a href="#n297">297</a></p>
<p id="n298" class="pln"><a href="#n298">298</a></p>
<p id="n299" class="pln"><a href="#n299">299</a></p>
<p id="n300" class="pln"><a href="#n300">300</a></p>
<p id="n301" class="pln"><a href="#n301">301</a></p>
<p id="n302" class="pln"><a href="#n302">302</a></p>
<p id="n303" class="pln"><a href="#n303">303</a></p>
<p id="n304" class="pln"><a href="#n304">304</a></p>
<p id="n305" class="pln"><a href="#n305">305</a></p>
<p id="n306" class="stm run hide_run"><a href="#n306">306</a></p>
<p id="n307" class="stm mis"><a href="#n307">307</a></p>
<p id="n308" class="stm run hide_run"><a href="#n308">308</a></p>
<p id="n309" class="stm run hide_run"><a href="#n309">309</a></p>
<p id="n310" class="stm run hide_run"><a href="#n310">310</a></p>
<p id="n311" class="stm run hide_run"><a href="#n311">311</a></p>
<p id="n312" class="stm run hide_run"><a href="#n312">312</a></p>
<p id="n313" class="pln"><a href="#n313">313</a></p>
<p id="n314" class="stm run hide_run"><a href="#n314">314</a></p>
<p id="n315" class="stm run hide_run"><a href="#n315">315</a></p>
<p id="n316" class="stm run hide_run"><a href="#n316">316</a></p>
<p id="n317" class="pln"><a href="#n317">317</a></p>
<p id="n318" class="stm run hide_run"><a href="#n318">318</a></p>
<p id="n319" class="pln"><a href="#n319">319</a></p>
<p id="n320" class="pln"><a href="#n320">320</a></p>
<p id="n321" class="pln"><a href="#n321">321</a></p>
<p id="n322" class="pln"><a href="#n322">322</a></p>
<p id="n323" class="pln"><a href="#n323">323</a></p>
<p id="n324" class="pln"><a href="#n324">324</a></p>
<p id="n325" class="pln"><a href="#n325">325</a></p>
<p id="n326" class="pln"><a href="#n326">326</a></p>
<p id="n327" class="stm run hide_run"><a href="#n327">327</a></p>
<p id="n328" class="stm mis"><a href="#n328">328</a></p>
<p id="n329" class="stm run hide_run"><a href="#n329">329</a></p>
<p id="n330" class="stm run hide_run"><a href="#n330">330</a></p>
<p id="n331" class="pln"><a href="#n331">331</a></p>
<p id="n332" class="stm run hide_run"><a href="#n332">332</a></p>
<p id="n333" class="pln"><a href="#n333">333</a></p>
<p id="n334" class="pln"><a href="#n334">334</a></p>
<p id="n335" class="pln"><a href="#n335">335</a></p>
<p id="n336" class="pln"><a href="#n336">336</a></p>
<p id="n337" class="pln"><a href="#n337">337</a></p>
<p id="n338" class="pln"><a href="#n338">338</a></p>
<p id="n339" class="pln"><a href="#n339">339</a></p>
<p id="n340" class="pln"><a href="#n340">340</a></p>
<p id="n341" class="stm run hide_run"><a href="#n341">341</a></p>
<p id="n342" class="stm run hide_run"><a href="#n342">342</a></p>
<p id="n343" class="pln"><a href="#n343">343</a></p>
<p id="n344" class="stm run hide_run"><a href="#n344">344</a></p>
<p id="n345" class="stm run hide_run"><a href="#n345">345</a></p>
<p id="n346" class="pln"><a href="#n346">346</a></p>
<p id="n347" class="stm mis"><a href="#n347">347</a></p>
<p id="n348" class="stm mis"><a href="#n348">348</a></p>
<p id="n349" class="stm mis"><a href="#n349">349</a></p>
<p id="n350" class="pln"><a href="#n350">350</a></p>
<p id="n351" class="pln"><a href="#n351">351</a></p>
<p id="n352" class="stm run hide_run"><a href="#n352">352</a></p>
<p id="n353" class="stm run hide_run"><a href="#n353">353</a></p>
<p id="n354" class="stm run hide_run"><a href="#n354">354</a></p>
<p id="n355" class="pln"><a href="#n355">355</a></p>
<p id="n356" class="stm run hide_run"><a href="#n356">356</a></p>
<p id="n357" class="pln"><a href="#n357">357</a></p>
<p id="n358" class="pln"><a href="#n358">358</a></p>
<p id="n359" class="pln"><a href="#n359">359</a></p>
<p id="n360" class="pln"><a href="#n360">360</a></p>
<p id="n361" class="pln"><a href="#n361">361</a></p>
<p id="n362" class="pln"><a href="#n362">362</a></p>
<p id="n363" class="pln"><a href="#n363">363</a></p>
<p id="n364" class="stm run hide_run"><a href="#n364">364</a></p>
<p id="n365" class="stm run hide_run"><a href="#n365">365</a></p>
<p id="n366" class="stm run hide_run"><a href="#n366">366</a></p>
<p id="n367" class="stm run hide_run"><a href="#n367">367</a></p>
<p id="n368" class="stm run hide_run"><a href="#n368">368</a></p>
<p id="n369" class="stm run hide_run"><a href="#n369">369</a></p>
<p id="n370" class="pln"><a href="#n370">370</a></p>
<p id="n371" class="stm run hide_run"><a href="#n371">371</a></p>
<p id="n372" class="pln"><a href="#n372">372</a></p>
<p id="n373" class="pln"><a href="#n373">373</a></p>
<p id="n374" class="pln"><a href="#n374">374</a></p>
<p id="n375" class="pln"><a href="#n375">375</a></p>
<p id="n376" class="pln"><a href="#n376">376</a></p>
<p id="n377" class="pln"><a href="#n377">377</a></p>
<p id="n378" class="pln"><a href="#n378">378</a></p>
<p id="n379" class="pln"><a href="#n379">379</a></p>
<p id="n380" class="pln"><a href="#n380">380</a></p>
<p id="n381" class="stm run hide_run"><a href="#n381">381</a></p>
<p id="n382" class="pln"><a href="#n382">382</a></p>
<p id="n383" class="pln"><a href="#n383">383</a></p>
<p id="n384" class="stm run hide_run"><a href="#n384">384</a></p>
<p id="n385" class="stm run hide_run"><a href="#n385">385</a></p>
<p id="n386" class="pln"><a href="#n386">386</a></p>
<p id="n387" class="stm run hide_run"><a href="#n387">387</a></p>
<p id="n388" class="pln"><a href="#n388">388</a></p>
<p id="n389" class="stm run hide_run"><a href="#n389">389</a></p>
<p id="n390" class="pln"><a href="#n390">390</a></p>
<p id="n391" class="stm run hide_run"><a href="#n391">391</a></p>
<p id="n392" class="pln"><a href="#n392">392</a></p>
<p id="n393" class="stm run hide_run"><a href="#n393">393</a></p>
<p id="n394" class="stm run hide_run"><a href="#n394">394</a></p>
<p id="n395" class="stm run hide_run"><a href="#n395">395</a></p>
<p id="n396" class="pln"><a href="#n396">396</a></p>
<p id="n397" class="stm run hide_run"><a href="#n397">397</a></p>
<p id="n398" class="pln"><a href="#n398">398</a></p>
<p id="n399" class="pln"><a href="#n399">399</a></p>
<p id="n400" class="pln"><a href="#n400">400</a></p>
<p id="n401" class="pln"><a href="#n401">401</a></p>
<p id="n402" class="pln"><a href="#n402">402</a></p>
<p id="n403" class="pln"><a href="#n403">403</a></p>
<p id="n404" class="pln"><a href="#n404">404</a></p>
<p id="n405" class="pln"><a href="#n405">405</a></p>
<p id="n406" class="stm run hide_run"><a href="#n406">406</a></p>
<p id="n407" class="stm run hide_run"><a href="#n407">407</a></p>
<p id="n408" class="stm run hide_run"><a href="#n408">408</a></p>
<p id="n409" class="stm run hide_run"><a href="#n409">409</a></p>
<p id="n410" class="stm run hide_run"><a href="#n410">410</a></p>
<p id="n411" class="stm run hide_run"><a href="#n411">411</a></p>
<p id="n412" class="stm mis"><a href="#n412">412</a></p>
<p id="n413" class="stm mis"><a href="#n413">413</a></p>
<p id="n414" class="stm run hide_run"><a href="#n414">414</a></p>
<p id="n415" class="pln"><a href="#n415">415</a></p>
<p id="n416" class="stm run hide_run"><a href="#n416">416</a></p>
<p id="n417" class="pln"><a href="#n417">417</a></p>
<p id="n418" class="pln"><a href="#n418">418</a></p>
<p id="n419" class="pln"><a href="#n419">419</a></p>
<p id="n420" class="pln"><a href="#n420">420</a></p>
<p id="n421" class="pln"><a href="#n421">421</a></p>
<p id="n422" class="pln"><a href="#n422">422</a></p>
<p id="n423" class="pln"><a href="#n423">423</a></p>
<p id="n424" class="pln"><a href="#n424">424</a></p>
<p id="n425" class="pln"><a href="#n425">425</a></p>
<p id="n426" class="stm run hide_run"><a href="#n426">426</a></p>
<p id="n427" class="stm run hide_run"><a href="#n427">427</a></p>
<p id="n428" class="stm run hide_run"><a href="#n428">428</a></p>
<p id="n429" class="stm run hide_run"><a href="#n429">429</a></p>
<p id="n430" class="stm run hide_run"><a href="#n430">430</a></p>
<p id="n431" class="stm run hide_run"><a href="#n431">431</a></p>
<p id="n432" class="stm run hide_run"><a href="#n432">432</a></p>
<p id="n433" class="stm run hide_run"><a href="#n433">433</a></p>
<p id="n434" class="stm run hide_run"><a href="#n434">434</a></p>
<p id="n435" class="stm run hide_run"><a href="#n435">435</a></p>
<p id="n436" class="stm run hide_run"><a href="#n436">436</a></p>
<p id="n437" class="pln"><a href="#n437">437</a></p>
<p id="n438" class="pln"><a href="#n438">438</a></p>
<p id="n439" class="pln"><a href="#n439">439</a></p>
<p id="n440" class="pln"><a href="#n440">440</a></p>
<p id="n441" class="pln"><a href="#n441">441</a></p>
<p id="n442" class="stm run hide_run"><a href="#n442">442</a></p>
<p id="n443" class="pln"><a href="#n443">443</a></p>
<p id="n444" class="pln"><a href="#n444">444</a></p>
<p id="n445" class="pln"><a href="#n445">445</a></p>
<p id="n446" class="pln"><a href="#n446">446</a></p>
<p id="n447" class="pln"><a href="#n447">447</a></p>
<p id="n448" class="stm run hide_run"><a href="#n448">448</a></p>
<p id="n449" class="stm run hide_run"><a href="#n449">449</a></p>
<p id="n450" class="pln"><a href="#n450">450</a></p>
<p id="n451" class="stm run hide_run"><a href="#n451">451</a></p>
<p id="n452" class="pln"><a href="#n452">452</a></p>
<p id="n453" class="pln"><a href="#n453">453</a></p>
<p id="n454" class="pln"><a href="#n454">454</a></p>
<p id="n455" class="pln"><a href="#n455">455</a></p>
<p id="n456" class="pln"><a href="#n456">456</a></p>
<p id="n457" class="stm run hide_run"><a href="#n457">457</a></p>
<p id="n458" class="stm run hide_run"><a href="#n458">458</a></p>
<p id="n459" class="stm run hide_run"><a href="#n459">459</a></p>
<p id="n460" class="stm run hide_run"><a href="#n460">460</a></p>
<p id="n461" class="stm run hide_run"><a href="#n461">461</a></p>
<p id="n462" class="pln"><a href="#n462">462</a></p>
<p id="n463" class="stm run hide_run"><a href="#n463">463</a></p>
<p id="n464" class="stm run hide_run"><a href="#n464">464</a></p>
<p id="n465" class="pln"><a href="#n465">465</a></p>
<p id="n466" class="pln"><a href="#n466">466</a></p>
<p id="n467" class="stm run hide_run"><a href="#n467">467</a></p>
<p id="n468" class="pln"><a href="#n468">468</a></p>
<p id="n469" class="pln"><a href="#n469">469</a></p>
<p id="n470" class="pln"><a href="#n470">470</a></p>
<p id="n471" class="pln"><a href="#n471">471</a></p>
<p id="n472" class="pln"><a href="#n472">472</a></p>
<p id="n473" class="pln"><a href="#n473">473</a></p>
<p id="n474" class="pln"><a href="#n474">474</a></p>
<p id="n475" class="stm run hide_run"><a href="#n475">475</a></p>
<p id="n476" class="stm run hide_run"><a href="#n476">476</a></p>
<p id="n477" class="stm run hide_run"><a href="#n477">477</a></p>
<p id="n478" class="stm run hide_run"><a href="#n478">478</a></p>
<p id="n479" class="stm run hide_run"><a href="#n479">479</a></p>
<p id="n480" class="stm run hide_run"><a href="#n480">480</a></p>
<p id="n481" class="pln"><a href="#n481">481</a></p>
<p id="n482" class="pln"><a href="#n482">482</a></p>
<p id="n483" class="stm run hide_run"><a href="#n483">483</a></p>
<p id="n484" class="stm run hide_run"><a href="#n484">484</a></p>
<p id="n485" class="stm run hide_run"><a href="#n485">485</a></p>
<p id="n486" class="pln"><a href="#n486">486</a></p>
<p id="n487" class="pln"><a href="#n487">487</a></p>
<p id="n488" class="stm run hide_run"><a href="#n488">488</a></p>
<p id="n489" class="pln"><a href="#n489">489</a></p>
<p id="n490" class="pln"><a href="#n490">490</a></p>
<p id="n491" class="pln"><a href="#n491">491</a></p>
<p id="n492" class="pln"><a href="#n492">492</a></p>
<p id="n493" class="pln"><a href="#n493">493</a></p>
<p id="n494" class="pln"><a href="#n494">494</a></p>
<p id="n495" class="pln"><a href="#n495">495</a></p>
<p id="n496" class="stm run hide_run"><a href="#n496">496</a></p>
<p id="n497" class="stm run hide_run"><a href="#n497">497</a></p>
<p id="n498" class="stm run hide_run"><a href="#n498">498</a></p>
<p id="n499" class="stm run hide_run"><a href="#n499">499</a></p>
<p id="n500" class="pln"><a href="#n500">500</a></p>
<p id="n501" class="stm run hide_run"><a href="#n501">501</a></p>
<p id="n502" class="stm run hide_run"><a href="#n502">502</a></p>
<p id="n503" class="pln"><a href="#n503">503</a></p>
<p id="n504" class="stm run hide_run"><a href="#n504">504</a></p>
<p id="n505" class="stm run hide_run"><a href="#n505">505</a></p>
<p id="n506" class="stm run hide_run"><a href="#n506">506</a></p>
<p id="n507" class="stm run hide_run"><a href="#n507">507</a></p>
<p id="n508" class="stm run hide_run"><a href="#n508">508</a></p>
<p id="n509" class="pln"><a href="#n509">509</a></p>
<p id="n510" class="stm run hide_run"><a href="#n510">510</a></p>
<p id="n511" class="stm run hide_run"><a href="#n511">511</a></p>
<p id="n512" class="stm run hide_run"><a href="#n512">512</a></p>
<p id="n513" class="pln"><a href="#n513">513</a></p>
<p id="n514" class="stm run hide_run"><a href="#n514">514</a></p>
<p id="n515" class="pln"><a href="#n515">515</a></p>
<p id="n516" class="pln"><a href="#n516">516</a></p>
<p id="n517" class="pln"><a href="#n517">517</a></p>
<p id="n518" class="pln"><a href="#n518">518</a></p>
<p id="n519" class="pln"><a href="#n519">519</a></p>
<p id="n520" class="pln"><a href="#n520">520</a></p>
<p id="n521" class="pln"><a href="#n521">521</a></p>
<p id="n522" class="pln"><a href="#n522">522</a></p>
<p id="n523" class="pln"><a href="#n523">523</a></p>
<p id="n524" class="stm run hide_run"><a href="#n524">524</a></p>
<p id="n525" class="stm run hide_run"><a href="#n525">525</a></p>
<p id="n526" class="stm run hide_run"><a href="#n526">526</a></p>
<p id="n527" class="pln"><a href="#n527">527</a></p>
<p id="n528" class="stm run hide_run"><a href="#n528">528</a></p>
<p id="n529" class="pln"><a href="#n529">529</a></p>
<p id="n530" class="pln"><a href="#n530">530</a></p>
<p id="n531" class="pln"><a href="#n531">531</a></p>
<p id="n532" class="pln"><a href="#n532">532</a></p>
<p id="n533" class="pln"><a href="#n533">533</a></p>
<p id="n534" class="pln"><a href="#n534">534</a></p>
<p id="n535" class="pln"><a href="#n535">535</a></p>
<p id="n536" class="stm run hide_run"><a href="#n536">536</a></p>
<p id="n537" class="stm run hide_run"><a href="#n537">537</a></p>
<p id="n538" class="stm run hide_run"><a href="#n538">538</a></p>
<p id="n539" class="stm run hide_run"><a href="#n539">539</a></p>
<p id="n540" class="stm run hide_run"><a href="#n540">540</a></p>
<p id="n541" class="stm run hide_run"><a href="#n541">541</a></p>
<p id="n542" class="pln"><a href="#n542">542</a></p>
<p id="n543" class="pln"><a href="#n543">543</a></p>
<p id="n544" class="pln"><a href="#n544">544</a></p>
<p id="n545" class="stm run hide_run"><a href="#n545">545</a></p>
<p id="n546" class="stm run hide_run"><a href="#n546">546</a></p>
<p id="n547" class="stm run hide_run"><a href="#n547">547</a></p>
<p id="n548" class="pln"><a href="#n548">548</a></p>
<p id="n549" class="stm run hide_run"><a href="#n549">549</a></p>
<p id="n550" class="pln"><a href="#n550">550</a></p>
<p id="n551" class="pln"><a href="#n551">551</a></p>
<p id="n552" class="pln"><a href="#n552">552</a></p>
<p id="n553" class="pln"><a href="#n553">553</a></p>
<p id="n554" class="pln"><a href="#n554">554</a></p>
<p id="n555" class="pln"><a href="#n555">555</a></p>
<p id="n556" class="pln"><a href="#n556">556</a></p>
<p id="n557" class="pln"><a href="#n557">557</a></p>
<p id="n558" class="pln"><a href="#n558">558</a></p>
<p id="n559" class="stm run hide_run"><a href="#n559">559</a></p>
<p id="n560" class="stm run hide_run"><a href="#n560">560</a></p>
<p id="n561" class="pln"><a href="#n561">561</a></p>
<p id="n562" class="stm run hide_run"><a href="#n562">562</a></p>
<p id="n563" class="stm mis"><a href="#n563">563</a></p>
<p id="n564" class="pln"><a href="#n564">564</a></p>
<p id="n565" class="pln"><a href="#n565">565</a></p>
<p id="n566" class="stm run hide_run"><a href="#n566">566</a></p>
<p id="n567" class="stm run hide_run"><a href="#n567">567</a></p>
<p id="n568" class="pln"><a href="#n568">568</a></p>
<p id="n569" class="stm run hide_run"><a href="#n569">569</a></p>
<p id="n570" class="stm mis"><a href="#n570">570</a></p>
<p id="n571" class="pln"><a href="#n571">571</a></p>
<p id="n572" class="pln"><a href="#n572">572</a></p>
<p id="n573" class="stm run hide_run"><a href="#n573">573</a></p>
<p id="n574" class="stm run hide_run"><a href="#n574">574</a></p>
<p id="n575" class="pln"><a href="#n575">575</a></p>
<p id="n576" class="stm run hide_run"><a href="#n576">576</a></p>
<p id="n577" class="pln"><a href="#n577">577</a></p>
<p id="n578" class="pln"><a href="#n578">578</a></p>
<p id="n579" class="pln"><a href="#n579">579</a></p>
<p id="n580" class="pln"><a href="#n580">580</a></p>
<p id="n581" class="pln"><a href="#n581">581</a></p>
<p id="n582" class="pln"><a href="#n582">582</a></p>
<p id="n583" class="pln"><a href="#n583">583</a></p>
<p id="n584" class="pln"><a href="#n584">584</a></p>
<p id="n585" class="stm run hide_run"><a href="#n585">585</a></p>
<p id="n586" class="stm run hide_run"><a href="#n586">586</a></p>
<p id="n587" class="stm mis"><a href="#n587">587</a></p>
<p id="n588" class="pln"><a href="#n588">588</a></p>
<p id="n589" class="stm run hide_run"><a href="#n589">589</a></p>
<p id="n590" class="stm run hide_run"><a href="#n590">590</a></p>
<p id="n591" class="stm mis"><a href="#n591">591</a></p>
<p id="n592" class="pln"><a href="#n592">592</a></p>
<p id="n593" class="pln"><a href="#n593">593</a></p>
<p id="n594" class="stm run hide_run"><a href="#n594">594</a></p>
<p id="n595" class="pln"><a href="#n595">595</a></p>
<p id="n596" class="pln"><a href="#n596">596</a></p>
<p id="n597" class="stm run hide_run"><a href="#n597">597</a></p>
<p id="n598" class="stm run hide_run"><a href="#n598">598</a></p>
<p id="n599" class="stm run hide_run"><a href="#n599">599</a></p>
<p id="n600" class="stm run hide_run"><a href="#n600">600</a></p>
<p id="n601" class="pln"><a href="#n601">601</a></p>
<p id="n602" class="stm run hide_run"><a href="#n602">602</a></p>
<p id="n603" class="pln"><a href="#n603">603</a></p>
<p id="n604" class="pln"><a href="#n604">604</a></p>
<p id="n605" class="pln"><a href="#n605">605</a></p>
<p id="n606" class="pln"><a href="#n606">606</a></p>
<p id="n607" class="pln"><a href="#n607">607</a></p>
<p id="n608" class="pln"><a href="#n608">608</a></p>
<p id="n609" class="pln"><a href="#n609">609</a></p>
<p id="n610" class="pln"><a href="#n610">610</a></p>
<p id="n611" class="pln"><a href="#n611">611</a></p>
<p id="n612" class="pln"><a href="#n612">612</a></p>
<p id="n613" class="stm run hide_run"><a href="#n613">613</a></p>
<p id="n614" class="stm run hide_run"><a href="#n614">614</a></p>
<p id="n615" class="stm run hide_run"><a href="#n615">615</a></p>
<p id="n616" class="pln"><a href="#n616">616</a></p>
<p id="n617" class="stm run hide_run"><a href="#n617">617</a></p>
<p id="n618" class="pln"><a href="#n618">618</a></p>
<p id="n619" class="pln"><a href="#n619">619</a></p>
<p id="n620" class="pln"><a href="#n620">620</a></p>
<p id="n621" class="pln"><a href="#n621">621</a></p>
<p id="n622" class="pln"><a href="#n622">622</a></p>
<p id="n623" class="pln"><a href="#n623">623</a></p>
<p id="n624" class="pln"><a href="#n624">624</a></p>
<p id="n625" class="pln"><a href="#n625">625</a></p>
<p id="n626" class="pln"><a href="#n626">626</a></p>
<p id="n627" class="stm run hide_run"><a href="#n627">627</a></p>
<p id="n628" class="stm run hide_run"><a href="#n628">628</a></p>
<p id="n629" class="stm run hide_run"><a href="#n629">629</a></p>
<p id="n630" class="pln"><a href="#n630">630</a></p>
<p id="n631" class="stm run hide_run"><a href="#n631">631</a></p>
<p id="n632" class="pln"><a href="#n632">632</a></p>
<p id="n633" class="pln"><a href="#n633">633</a></p>
<p id="n634" class="pln"><a href="#n634">634</a></p>
<p id="n635" class="pln"><a href="#n635">635</a></p>
<p id="n636" class="pln"><a href="#n636">636</a></p>
<p id="n637" class="pln"><a href="#n637">637</a></p>
<p id="n638" class="pln"><a href="#n638">638</a></p>
<p id="n639" class="pln"><a href="#n639">639</a></p>
<p id="n640" class="pln"><a href="#n640">640</a></p>
<p id="n641" class="pln"><a href="#n641">641</a></p>
<p id="n642" class="stm run hide_run"><a href="#n642">642</a></p>
<p id="n643" class="stm run hide_run"><a href="#n643">643</a></p>
<p id="n644" class="stm run hide_run"><a href="#n644">644</a></p>
<p id="n645" class="stm run hide_run"><a href="#n645">645</a></p>
<p id="n646" class="stm run hide_run"><a href="#n646">646</a></p>
<p id="n647" class="stm run hide_run"><a href="#n647">647</a></p>
<p id="n648" class="stm run hide_run"><a href="#n648">648</a></p>
<p id="n649" class="pln"><a href="#n649">649</a></p>
<p id="n650" class="stm run hide_run"><a href="#n650">650</a></p>
<p id="n651" class="stm run hide_run"><a href="#n651">651</a></p>
<p id="n652" class="stm run hide_run"><a href="#n652">652</a></p>
<p id="n653" class="pln"><a href="#n653">653</a></p>
<p id="n654" class="stm run hide_run"><a href="#n654">654</a></p>
<p id="n655" class="pln"><a href="#n655">655</a></p>
<p id="n656" class="pln"><a href="#n656">656</a></p>
<p id="n657" class="pln"><a href="#n657">657</a></p>
<p id="n658" class="pln"><a href="#n658">658</a></p>
<p id="n659" class="pln"><a href="#n659">659</a></p>
<p id="n660" class="pln"><a href="#n660">660</a></p>
<p id="n661" class="pln"><a href="#n661">661</a></p>
<p id="n662" class="pln"><a href="#n662">662</a></p>
<p id="n663" class="stm run hide_run"><a href="#n663">663</a></p>
<p id="n664" class="stm run hide_run"><a href="#n664">664</a></p>
<p id="n665" class="pln"><a href="#n665">665</a></p>
<p id="n666" class="pln"><a href="#n666">666</a></p>
<p id="n667" class="pln"><a href="#n667">667</a></p>
<p id="n668" class="stm run hide_run"><a href="#n668">668</a></p>
<p id="n669" class="stm mis"><a href="#n669">669</a></p>
<p id="n670" class="stm run hide_run"><a href="#n670">670</a></p>
<p id="n671" class="stm run hide_run"><a href="#n671">671</a></p>
<p id="n672" class="pln"><a href="#n672">672</a></p>
<p id="n673" class="stm run hide_run"><a href="#n673">673</a></p>
<p id="n674" class="pln"><a href="#n674">674</a></p>
<p id="n675" class="pln"><a href="#n675">675</a></p>
<p id="n676" class="pln"><a href="#n676">676</a></p>
<p id="n677" class="pln"><a href="#n677">677</a></p>
<p id="n678" class="pln"><a href="#n678">678</a></p>
<p id="n679" class="pln"><a href="#n679">679</a></p>
<p id="n680" class="pln"><a href="#n680">680</a></p>
<p id="n681" class="stm run hide_run"><a href="#n681">681</a></p>
<p id="n682" class="stm run hide_run"><a href="#n682">682</a></p>
<p id="n683" class="pln"><a href="#n683">683</a></p>
<p id="n684" class="stm run hide_run"><a href="#n684">684</a></p>
<p id="n685" class="pln"><a href="#n685">685</a></p>
<p id="n686" class="pln"><a href="#n686">686</a></p>
<p id="n687" class="pln"><a href="#n687">687</a></p>
<p id="n688" class="pln"><a href="#n688">688</a></p>
<p id="n689" class="pln"><a href="#n689">689</a></p>
<p id="n690" class="pln"><a href="#n690">690</a></p>
<p id="n691" class="pln"><a href="#n691">691</a></p>
<p id="n692" class="stm run hide_run"><a href="#n692">692</a></p>
<p id="n693" class="stm run hide_run"><a href="#n693">693</a></p>
<p id="n694" class="stm run hide_run"><a href="#n694">694</a></p>
<p id="n695" class="stm run hide_run"><a href="#n695">695</a></p>
<p id="n696" class="stm run hide_run"><a href="#n696">696</a></p>
<p id="n697" class="pln"><a href="#n697">697</a></p>
<p id="n698" class="stm run hide_run"><a href="#n698">698</a></p>
<p id="n699" class="stm run hide_run"><a href="#n699">699</a></p>
<p id="n700" class="pln"><a href="#n700">700</a></p>
<p id="n701" class="stm run hide_run"><a href="#n701">701</a></p>
<p id="n702" class="stm run hide_run"><a href="#n702">702</a></p>
<p id="n703" class="stm run hide_run"><a href="#n703">703</a></p>
<p id="n704" class="pln"><a href="#n704">704</a></p>
<p id="n705" class="stm run hide_run"><a href="#n705">705</a></p>
<p id="n706" class="stm run hide_run"><a href="#n706">706</a></p>
<p id="n707" class="stm run hide_run"><a href="#n707">707</a></p>
<p id="n708" class="stm run hide_run"><a href="#n708">708</a></p>
<p id="n709" class="pln"><a href="#n709">709</a></p>
<p id="n710" class="stm run hide_run"><a href="#n710">710</a></p>
<p id="n711" class="stm run hide_run"><a href="#n711">711</a></p>
<p id="n712" class="stm run hide_run"><a href="#n712">712</a></p>
<p id="n713" class="pln"><a href="#n713">713</a></p>
<p id="n714" class="pln"><a href="#n714">714</a></p>
<p id="n715" class="pln"><a href="#n715">715</a></p>
<p id="n716" class="pln"><a href="#n716">716</a></p>
<p id="n717" class="pln"><a href="#n717">717</a></p>
<p id="n718" class="pln"><a href="#n718">718</a></p>
<p id="n719" class="stm run hide_run"><a href="#n719">719</a></p>
<p id="n720" class="pln"><a href="#n720">720</a></p>
<p id="n721" class="pln"><a href="#n721">721</a></p>
<p id="n722" class="pln"><a href="#n722">722</a></p>
<p id="n723" class="pln"><a href="#n723">723</a></p>
<p id="n724" class="pln"><a href="#n724">724</a></p>
<p id="n725" class="pln"><a href="#n725">725</a></p>
<p id="n726" class="pln"><a href="#n726">726</a></p>
<p id="n727" class="pln"><a href="#n727">727</a></p>
<p id="n728" class="pln"><a href="#n728">728</a></p>
<p id="n729" class="pln"><a href="#n729">729</a></p>
<p id="n730" class="pln"><a href="#n730">730</a></p>
<p id="n731" class="pln"><a href="#n731">731</a></p>
<p id="n732" class="pln"><a href="#n732">732</a></p>
<p id="n733" class="stm run hide_run"><a href="#n733">733</a></p>
<p id="n734" class="stm run hide_run"><a href="#n734">734</a></p>
<p id="n735" class="pln"><a href="#n735">735</a></p>
<p id="n736" class="stm run hide_run"><a href="#n736">736</a></p>
<p id="n737" class="stm run hide_run"><a href="#n737">737</a></p>
<p id="n738" class="stm run hide_run"><a href="#n738">738</a></p>
<p id="n739" class="stm run hide_run"><a href="#n739">739</a></p>
<p id="n740" class="pln"><a href="#n740">740</a></p>
<p id="n741" class="stm run hide_run"><a href="#n741">741</a></p>
<p id="n742" class="pln"><a href="#n742">742</a></p>
<p id="n743" class="stm run hide_run"><a href="#n743">743</a></p>
<p id="n744" class="pln"><a href="#n744">744</a></p>
<p id="n745" class="stm run hide_run"><a href="#n745">745</a></p>
<p id="n746" class="stm run hide_run"><a href="#n746">746</a></p>
<p id="n747" class="stm run hide_run"><a href="#n747">747</a></p>
<p id="n748" class="stm run hide_run"><a href="#n748">748</a></p>
<p id="n749" class="stm run hide_run"><a href="#n749">749</a></p>
<p id="n750" class="pln"><a href="#n750">750</a></p>
<p id="n751" class="stm run hide_run"><a href="#n751">751</a></p>
<p id="n752" class="stm run hide_run"><a href="#n752">752</a></p>
<p id="n753" class="stm run hide_run"><a href="#n753">753</a></p>
<p id="n754" class="pln"><a href="#n754">754</a></p>
<p id="n755" class="stm run hide_run"><a href="#n755">755</a></p>
<p id="n756" class="stm run hide_run"><a href="#n756">756</a></p>
<p id="n757" class="stm run hide_run"><a href="#n757">757</a></p>
<p id="n758" class="stm run hide_run"><a href="#n758">758</a></p>
<p id="n759" class="stm run hide_run"><a href="#n759">759</a></p>
<p id="n760" class="pln"><a href="#n760">760</a></p>
<p id="n761" class="stm run hide_run"><a href="#n761">761</a></p>
<p id="n762" class="pln"><a href="#n762">762</a></p>
<p id="n763" class="pln"><a href="#n763">763</a></p>
<p id="n764" class="pln"><a href="#n764">764</a></p>
<p id="n765" class="pln"><a href="#n765">765</a></p>
<p id="n766" class="pln"><a href="#n766">766</a></p>
<p id="n767" class="pln"><a href="#n767">767</a></p>
<p id="n768" class="pln"><a href="#n768">768</a></p>
<p id="n769" class="pln"><a href="#n769">769</a></p>
<p id="n770" class="pln"><a href="#n770">770</a></p>
<p id="n771" class="pln"><a href="#n771">771</a></p>
<p id="n772" class="pln"><a href="#n772">772</a></p>
<p id="n773" class="pln"><a href="#n773">773</a></p>
<p id="n774" class="pln"><a href="#n774">774</a></p>
<p id="n775" class="stm run hide_run"><a href="#n775">775</a></p>
<p id="n776" class="pln"><a href="#n776">776</a></p>
<p id="n777" class="pln"><a href="#n777">777</a></p>
<p id="n778" class="pln"><a href="#n778">778</a></p>
<p id="n779" class="stm run hide_run"><a href="#n779">779</a></p>
<p id="n780" class="stm run hide_run"><a href="#n780">780</a></p>
<p id="n781" class="stm run hide_run"><a href="#n781">781</a></p>
<p id="n782" class="pln"><a href="#n782">782</a></p>
<p id="n783" class="stm run hide_run"><a href="#n783">783</a></p>
<p id="n784" class="stm run hide_run"><a href="#n784">784</a></p>
<p id="n785" class="pln"><a href="#n785">785</a></p>
<p id="n786" class="pln"><a href="#n786">786</a></p>
<p id="n787" class="stm run hide_run"><a href="#n787">787</a></p>
<p id="n788" class="stm run hide_run"><a href="#n788">788</a></p>
<p id="n789" class="stm run hide_run"><a href="#n789">789</a></p>
<p id="n790" class="pln"><a href="#n790">790</a></p>
<p id="n791" class="pln"><a href="#n791">791</a></p>
<p id="n792" class="stm run hide_run"><a href="#n792">792</a></p>
<p id="n793" class="stm run hide_run"><a href="#n793">793</a></p>
<p id="n794" class="stm run hide_run"><a href="#n794">794</a></p>
<p id="n795" class="stm run hide_run"><a href="#n795">795</a></p>
<p id="n796" class="stm run hide_run"><a href="#n796">796</a></p>
<p id="n797" class="stm run hide_run"><a href="#n797">797</a></p>
<p id="n798" class="pln"><a href="#n798">798</a></p>
<p id="n799" class="stm run hide_run"><a href="#n799">799</a></p>
<p id="n800" class="stm run hide_run"><a href="#n800">800</a></p>
<p id="n801" class="pln"><a href="#n801">801</a></p>
<p id="n802" class="pln"><a href="#n802">802</a></p>
<p id="n803" class="pln"><a href="#n803">803</a></p>
<p id="n804" class="stm run hide_run"><a href="#n804">804</a></p>
<p id="n805" class="stm run hide_run"><a href="#n805">805</a></p>
<p id="n806" class="pln"><a href="#n806">806</a></p>
<p id="n807" class="stm run hide_run"><a href="#n807">807</a></p>
<p id="n808" class="pln"><a href="#n808">808</a></p>
<p id="n809" class="stm run hide_run"><a href="#n809">809</a></p>
<p id="n810" class="pln"><a href="#n810">810</a></p>
<p id="n811" class="pln"><a href="#n811">811</a></p>
<p id="n812" class="pln"><a href="#n812">812</a></p>
<p id="n813" class="pln"><a href="#n813">813</a></p>
<p id="n814" class="pln"><a href="#n814">814</a></p>
<p id="n815" class="pln"><a href="#n815">815</a></p>
<p id="n816" class="pln"><a href="#n816">816</a></p>
<p id="n817" class="pln"><a href="#n817">817</a></p>
<p id="n818" class="pln"><a href="#n818">818</a></p>
<p id="n819" class="pln"><a href="#n819">819</a></p>
<p id="n820" class="pln"><a href="#n820">820</a></p>
<p id="n821" class="pln"><a href="#n821">821</a></p>
<p id="n822" class="stm run hide_run"><a href="#n822">822</a></p>
<p id="n823" class="stm run hide_run"><a href="#n823">823</a></p>
<p id="n824" class="stm run hide_run"><a href="#n824">824</a></p>
<p id="n825" class="stm run hide_run"><a href="#n825">825</a></p>
<p id="n826" class="pln"><a href="#n826">826</a></p>
<p id="n827" class="stm run hide_run"><a href="#n827">827</a></p>
<p id="n828" class="stm run hide_run"><a href="#n828">828</a></p>
<p id="n829" class="pln"><a href="#n829">829</a></p>
<p id="n830" class="pln"><a href="#n830">830</a></p>
<p id="n831" class="stm run hide_run"><a href="#n831">831</a></p>
<p id="n832" class="stm run hide_run"><a href="#n832">832</a></p>
<p id="n833" class="pln"><a href="#n833">833</a></p>
<p id="n834" class="stm run hide_run"><a href="#n834">834</a></p>
<p id="n835" class="stm run hide_run"><a href="#n835">835</a></p>
<p id="n836" class="stm run hide_run"><a href="#n836">836</a></p>
<p id="n837" class="pln"><a href="#n837">837</a></p>
<p id="n838" class="pln"><a href="#n838">838</a></p>
<p id="n839" class="stm run hide_run"><a href="#n839">839</a></p>
<p id="n840" class="pln"><a href="#n840">840</a></p>
<p id="n841" class="stm run hide_run"><a href="#n841">841</a></p>
<p id="n842" class="stm run hide_run"><a href="#n842">842</a></p>
<p id="n843" class="pln"><a href="#n843">843</a></p>
<p id="n844" class="stm run hide_run"><a href="#n844">844</a></p>
<p id="n845" class="stm run hide_run"><a href="#n845">845</a></p>
<p id="n846" class="pln"><a href="#n846">846</a></p>
<p id="n847" class="stm run hide_run"><a href="#n847">847</a></p>
<p id="n848" class="pln"><a href="#n848">848</a></p>
<p id="n849" class="stm run hide_run"><a href="#n849">849</a></p>
<p id="n850" class="stm run hide_run"><a href="#n850">850</a></p>
<p id="n851" class="stm run hide_run"><a href="#n851">851</a></p>
<p id="n852" class="stm run hide_run"><a href="#n852">852</a></p>
<p id="n853" class="stm run hide_run"><a href="#n853">853</a></p>
<p id="n854" class="pln"><a href="#n854">854</a></p>
<p id="n855" class="stm run hide_run"><a href="#n855">855</a></p>
<p id="n856" class="stm run hide_run"><a href="#n856">856</a></p>
<p id="n857" class="stm run hide_run"><a href="#n857">857</a></p>
<p id="n858" class="pln"><a href="#n858">858</a></p>
<p id="n859" class="pln"><a href="#n859">859</a></p>
<p id="n860" class="stm run hide_run"><a href="#n860">860</a></p>
<p id="n861" class="pln"><a href="#n861">861</a></p>
<p id="n862" class="stm run hide_run"><a href="#n862">862</a></p>
<p id="n863" class="pln"><a href="#n863">863</a></p>
<p id="n864" class="pln"><a href="#n864">864</a></p>
<p id="n865" class="pln"><a href="#n865">865</a></p>
<p id="n866" class="pln"><a href="#n866">866</a></p>
<p id="n867" class="pln"><a href="#n867">867</a></p>
<p id="n868" class="pln"><a href="#n868">868</a></p>
<p id="n869" class="pln"><a href="#n869">869</a></p>
<p id="n870" class="pln"><a href="#n870">870</a></p>
<p id="n871" class="pln"><a href="#n871">871</a></p>
<p id="n872" class="pln"><a href="#n872">872</a></p>
<p id="n873" class="pln"><a href="#n873">873</a></p>
<p id="n874" class="pln"><a href="#n874">874</a></p>
<p id="n875" class="stm run hide_run"><a href="#n875">875</a></p>
<p id="n876" class="pln"><a href="#n876">876</a></p>
<p id="n877" class="stm run hide_run"><a href="#n877">877</a></p>
<p id="n878" class="stm run hide_run"><a href="#n878">878</a></p>
<p id="n879" class="pln"><a href="#n879">879</a></p>
<p id="n880" class="pln"><a href="#n880">880</a></p>
<p id="n881" class="stm run hide_run"><a href="#n881">881</a></p>
<p id="n882" class="stm run hide_run"><a href="#n882">882</a></p>
<p id="n883" class="stm run hide_run"><a href="#n883">883</a></p>
<p id="n884" class="pln"><a href="#n884">884</a></p>
<p id="n885" class="stm run hide_run"><a href="#n885">885</a></p>
<p id="n886" class="stm run hide_run"><a href="#n886">886</a></p>
<p id="n887" class="pln"><a href="#n887">887</a></p>
<p id="n888" class="stm run hide_run"><a href="#n888">888</a></p>
<p id="n889" class="stm run hide_run"><a href="#n889">889</a></p>
<p id="n890" class="stm run hide_run"><a href="#n890">890</a></p>
<p id="n891" class="pln"><a href="#n891">891</a></p>
<p id="n892" class="stm run hide_run"><a href="#n892">892</a></p>
<p id="n893" class="stm run hide_run"><a href="#n893">893</a></p>
<p id="n894" class="pln"><a href="#n894">894</a></p>
<p id="n895" class="pln"><a href="#n895">895</a></p>
<p id="n896" class="stm run hide_run"><a href="#n896">896</a></p>
<p id="n897" class="stm run hide_run"><a href="#n897">897</a></p>
<p id="n898" class="stm run hide_run"><a href="#n898">898</a></p>
<p id="n899" class="pln"><a href="#n899">899</a></p>
<p id="n900" class="pln"><a href="#n900">900</a></p>
<p id="n901" class="stm run hide_run"><a href="#n901">901</a></p>
<p id="n902" class="pln"><a href="#n902">902</a></p>
<p id="n903" class="stm run hide_run"><a href="#n903">903</a></p>
<p id="n904" class="stm run hide_run"><a href="#n904">904</a></p>
<p id="n905" class="pln"><a href="#n905">905</a></p>
<p id="n906" class="stm run hide_run"><a href="#n906">906</a></p>
<p id="n907" class="stm run hide_run"><a href="#n907">907</a></p>
<p id="n908" class="pln"><a href="#n908">908</a></p>
<p id="n909" class="stm run hide_run"><a href="#n909">909</a></p>
<p id="n910" class="stm run hide_run"><a href="#n910">910</a></p>
<p id="n911" class="stm run hide_run"><a href="#n911">911</a></p>
<p id="n912" class="stm run hide_run"><a href="#n912">912</a></p>
<p id="n913" class="stm run hide_run"><a href="#n913">913</a></p>
<p id="n914" class="stm run hide_run"><a href="#n914">914</a></p>
<p id="n915" class="pln"><a href="#n915">915</a></p>
<p id="n916" class="stm run hide_run"><a href="#n916">916</a></p>
<p id="n917" class="stm run hide_run"><a href="#n917">917</a></p>
<p id="n918" class="stm run hide_run"><a href="#n918">918</a></p>
<p id="n919" class="pln"><a href="#n919">919</a></p>
<p id="n920" class="pln"><a href="#n920">920</a></p>
<p id="n921" class="stm run hide_run"><a href="#n921">921</a></p>
<p id="n922" class="pln"><a href="#n922">922</a></p>
<p id="n923" class="pln"><a href="#n923">923</a></p>
<p id="n924" class="pln"><a href="#n924">924</a></p>
<p id="n925" class="pln"><a href="#n925">925</a></p>
<p id="n926" class="stm run hide_run"><a href="#n926">926</a></p>
<p id="n927" class="pln"><a href="#n927">927</a></p>
<p id="n928" class="pln"><a href="#n928">928</a></p>
<p id="n929" class="pln"><a href="#n929">929</a></p>
<p id="n930" class="pln"><a href="#n930">930</a></p>
<p id="n931" class="pln"><a href="#n931">931</a></p>
<p id="n932" class="pln"><a href="#n932">932</a></p>
<p id="n933" class="pln"><a href="#n933">933</a></p>
<p id="n934" class="pln"><a href="#n934">934</a></p>
<p id="n935" class="stm run hide_run"><a href="#n935">935</a></p>
<p id="n936" class="pln"><a href="#n936">936</a></p>
<p id="n937" class="stm run hide_run"><a href="#n937">937</a></p>
<p id="n938" class="stm run hide_run"><a href="#n938">938</a></p>
<p id="n939" class="pln"><a href="#n939">939</a></p>
<p id="n940" class="stm run hide_run"><a href="#n940">940</a></p>
<p id="n941" class="stm run hide_run"><a href="#n941">941</a></p>
<p id="n942" class="pln"><a href="#n942">942</a></p>
<p id="n943" class="stm run hide_run"><a href="#n943">943</a></p>
<p id="n944" class="pln"><a href="#n944">944</a></p>
<p id="n945" class="stm run hide_run"><a href="#n945">945</a></p>
<p id="n946" class="stm run hide_run"><a href="#n946">946</a></p>
<p id="n947" class="stm run hide_run"><a href="#n947">947</a></p>
<p id="n948" class="pln"><a href="#n948">948</a></p>
<p id="n949" class="stm run hide_run"><a href="#n949">949</a></p>
<p id="n950" class="stm mis"><a href="#n950">950</a></p>
<p id="n951" class="stm run hide_run"><a href="#n951">951</a></p>
<p id="n952" class="stm run hide_run"><a href="#n952">952</a></p>
<p id="n953" class="pln"><a href="#n953">953</a></p>
<p id="n954" class="stm run hide_run"><a href="#n954">954</a></p>
<p id="n955" class="pln"><a href="#n955">955</a></p>
<p id="n956" class="pln"><a href="#n956">956</a></p>
<p id="n957" class="pln"><a href="#n957">957</a></p>
<p id="n958" class="pln"><a href="#n958">958</a></p>
<p id="n959" class="pln"><a href="#n959">959</a></p>
<p id="n960" class="pln"><a href="#n960">960</a></p>
<p id="n961" class="pln"><a href="#n961">961</a></p>
<p id="n962" class="pln"><a href="#n962">962</a></p>
<p id="n963" class="pln"><a href="#n963">963</a></p>
<p id="n964" class="pln"><a href="#n964">964</a></p>
<p id="n965" class="stm run hide_run"><a href="#n965">965</a></p>
<p id="n966" class="stm run hide_run"><a href="#n966">966</a></p>
<p id="n967" class="stm run hide_run"><a href="#n967">967</a></p>
<p id="n968" class="pln"><a href="#n968">968</a></p>
<p id="n969" class="stm run hide_run"><a href="#n969">969</a></p>
<p id="n970" class="stm run hide_run"><a href="#n970">970</a></p>
<p id="n971" class="pln"><a href="#n971">971</a></p>
<p id="n972" class="stm run hide_run"><a href="#n972">972</a></p>
<p id="n973" class="stm run hide_run"><a href="#n973">973</a></p>
<p id="n974" class="stm run hide_run"><a href="#n974">974</a></p>
<p id="n975" class="stm run hide_run"><a href="#n975">975</a></p>
<p id="n976" class="stm run hide_run"><a href="#n976">976</a></p>
<p id="n977" class="pln"><a href="#n977">977</a></p>
<p id="n978" class="stm run hide_run"><a href="#n978">978</a></p>
<p id="n979" class="stm run hide_run"><a href="#n979">979</a></p>
<p id="n980" class="stm run hide_run"><a href="#n980">980</a></p>
<p id="n981" class="pln"><a href="#n981">981</a></p>
<p id="n982" class="stm run hide_run"><a href="#n982">982</a></p>
<p id="n983" class="stm run hide_run"><a href="#n983">983</a></p>
<p id="n984" class="stm run hide_run"><a href="#n984">984</a></p>
<p id="n985" class="stm run hide_run"><a href="#n985">985</a></p>
<p id="n986" class="stm run hide_run"><a href="#n986">986</a></p>
<p id="n987" class="stm run hide_run"><a href="#n987">987</a></p>
<p id="n988" class="stm run hide_run"><a href="#n988">988</a></p>
<p id="n989" class="stm run hide_run"><a href="#n989">989</a></p>
<p id="n990" class="stm run hide_run"><a href="#n990">990</a></p>
<p id="n991" class="pln"><a href="#n991">991</a></p>
<p id="n992" class="stm mis"><a href="#n992">992</a></p>
<p id="n993" class="pln"><a href="#n993">993</a></p>
<p id="n994" class="stm run hide_run"><a href="#n994">994</a></p>
<p id="n995" class="pln"><a href="#n995">995</a></p>
<p id="n996" class="pln"><a href="#n996">996</a></p>
<p id="n997" class="pln"><a href="#n997">997</a></p>
<p id="n998" class="pln"><a href="#n998">998</a></p>
<p id="n999" class="pln"><a href="#n999">999</a></p>
<p id="n1000" class="pln"><a href="#n1000">1000</a></p>
<p id="n1001" class="pln"><a href="#n1001">1001</a></p>
<p id="n1002" class="stm run hide_run"><a href="#n1002">1002</a></p>
<p id="n1003" class="stm run hide_run"><a href="#n1003">1003</a></p>
<p id="n1004" class="stm run hide_run"><a href="#n1004">1004</a></p>
<p id="n1005" class="stm run hide_run"><a href="#n1005">1005</a></p>
<p id="n1006" class="stm run hide_run"><a href="#n1006">1006</a></p>
<p id="n1007" class="stm run hide_run"><a href="#n1007">1007</a></p>
<p id="n1008" class="stm run hide_run"><a href="#n1008">1008</a></p>
<p id="n1009" class="stm run hide_run"><a href="#n1009">1009</a></p>
<p id="n1010" class="stm run hide_run"><a href="#n1010">1010</a></p>
<p id="n1011" class="stm run hide_run"><a href="#n1011">1011</a></p>
<p id="n1012" class="stm run hide_run"><a href="#n1012">1012</a></p>

            </td>
            <td class="text">
<p id="t1" class="pln"><span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2" class="pln"><span class="str">Scenewalk Model Implementation</span><span class="strut">&nbsp;</span></p>
<p id="t3" class="pln"><span class="str">Lisa Schwetlick 2019</span><span class="strut">&nbsp;</span></p>
<p id="t4" class="pln"><span class="str">University of Potsdam</span><span class="strut">&nbsp;</span></p>
<p id="t5" class="pln"><span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t6" class="stm run hide_run"><span class="key">import</span> <span class="nam">warnings</span><span class="strut">&nbsp;</span></p>
<p id="t7" class="stm run hide_run"><span class="key">from</span> <span class="nam">collections</span> <span class="key">import</span> <span class="nam">OrderedDict</span><span class="strut">&nbsp;</span></p>
<p id="t8" class="stm run hide_run"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span><span class="strut">&nbsp;</span></p>
<p id="t9" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t10" class="stm run hide_run"><span class="key">class</span> <span class="nam">scenewalk</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t11" class="pln">    <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t12" class="pln"><span class="str">    Model class. Makes a scenewalk model according to the configurations given at instantiation</span><span class="strut">&nbsp;</span></p>
<p id="t13" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t14" class="pln"><span class="str">    Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t15" class="pln"><span class="str">        - inhib_method ['subtractive' or 'divisive']: how are attention and inhibition map combined?</span><span class="strut">&nbsp;</span></p>
<p id="t16" class="pln"><span class="str">        - att_map_init_type ['zero' or 'cb']: how is the attention map initialized?</span><span class="strut">&nbsp;</span></p>
<p id="t17" class="pln"><span class="str">        - postsaccadic_shift_switch ['on' or 'off']: is there a postaccadic attention shift?</span><span class="strut">&nbsp;</span></p>
<p id="t18" class="pln"><span class="str">        - presaccadic_shift_switch ['on' or 'off']: is there a presaccadic attention shift?</span><span class="strut">&nbsp;</span></p>
<p id="t19" class="pln"><span class="str">        - exponents [1 or 2]: are Lambda and Gamma independent?</span><span class="strut">&nbsp;</span></p>
<p id="t20" class="pln"><span class="str">        - locdep_decay_switch ['on' or 'off']: Is there slower decay on he previous fixation location?</span><span class="strut">&nbsp;</span></p>
<p id="t21" class="pln"><span class="str">        - data_range [{'x' : [0,127], 'y' : [0,127]}]: dictionary of the data range.</span><span class="strut">&nbsp;</span></p>
<p id="t22" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t23" class="pln">    <span class="com"># Base Settings</span><span class="strut">&nbsp;</span></p>
<p id="t24" class="stm run hide_run">    <span class="nam">MAP_SIZE</span> <span class="op">=</span> <span class="num">128</span><span class="strut">&nbsp;</span></p>
<p id="t25" class="stm run hide_run">    <span class="nam">EPS</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">finfo</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">float128</span><span class="op">)</span><span class="op">.</span><span class="nam">eps</span><span class="strut">&nbsp;</span></p>
<p id="t26" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t27" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">inhib_method</span><span class="op">,</span> <span class="nam">att_map_init_type</span><span class="op">,</span> <span class="nam">shifts</span><span class="op">,</span> <span class="nam">exponents</span><span class="op">,</span> <span class="nam">locdep_decay_switch</span><span class="op">,</span> <span class="nam">data_range</span><span class="op">,</span> <span class="nam">kwargs_dict</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t28" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t29" class="pln"><span class="str">        Set up configutation of a scenewalk model variant. The given settings are used to pick the appropriate subfunctions of the model and bind them to their general name.</span><span class="strut">&nbsp;</span></p>
<p id="t30" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t31" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t32" class="pln"><span class="str">            - inhib_method ['subtractive' or 'divisive']: how are attention and inhibition map combined?</span><span class="strut">&nbsp;</span></p>
<p id="t33" class="pln"><span class="str">            - att_map_init_type ['zero' or 'cb']: how is the attention map initialized?</span><span class="strut">&nbsp;</span></p>
<p id="t34" class="pln"><span class="str">            - shifts ['off' or 'pre' or 'post' or 'both']: specify pre- and post saccadic shifts to use</span><span class="strut">&nbsp;</span></p>
<p id="t35" class="pln"><span class="str">            - exponents [1 or 2]: are Lambda and Gamma independent?</span><span class="strut">&nbsp;</span></p>
<p id="t36" class="pln"><span class="str">            - locdep_decay_switch ['on' or 'off']: Is there slower decay on he previous fixation location?</span><span class="strut">&nbsp;</span></p>
<p id="t37" class="pln"><span class="str">            - data_range [{'x' : [0,127], 'y' : [0,127]}]: dictionary of the data range.</span><span class="strut">&nbsp;</span></p>
<p id="t38" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t39" class="pln">        <span class="com"># Internal Vars</span><span class="strut">&nbsp;</span></p>
<p id="t40" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_yy</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">float128</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">mgrid</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="nam">self</span><span class="op">.</span><span class="nam">MAP_SIZE</span><span class="op">,</span> <span class="num">0</span><span class="op">:</span><span class="nam">self</span><span class="op">.</span><span class="nam">MAP_SIZE</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t41" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">inputs_in_deg</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t42" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t43" class="pln">        <span class="com"># Settings: picks the appropriate functions for the chosen configuration</span><span class="strut">&nbsp;</span></p>
<p id="t44" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">=</span> <span class="nam">att_map_init_type</span>  <span class="com"># random, cb, zero, one</span><span class="strut">&nbsp;</span></p>
<p id="t45" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_funcs</span> <span class="op">=</span> <span class="op">{</span><span class="str">"zero"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initialize_map_unif</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t46" class="pln">                                   <span class="str">"cb"</span> <span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initialize_center_bias</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t47" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_funcs</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t48" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t49" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">inhib_type</span> <span class="op">=</span> <span class="nam">inhib_method</span>  <span class="com"># subtractive, divisive</span><span class="strut">&nbsp;</span></p>
<p id="t50" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">inhib_funcs</span> <span class="op">=</span> <span class="op">{</span><span class="str">"subtractive"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_subtractive</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t51" class="pln">                            <span class="str">"divisive"</span> <span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_divisive</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t52" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">combine</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inhib_funcs</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">inhib_type</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t53" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t54" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">=</span> <span class="nam">shifts</span><span class="strut">&nbsp;</span></p>
<p id="t55" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_funcs</span> <span class="op">=</span> <span class="op">{</span><span class="str">"off"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_main</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t56" class="pln">                                  <span class="str">"pre"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_presac</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t57" class="pln">                                  <span class="str">"post"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_postsac</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t58" class="pln">                                  <span class="str">"both"</span> <span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_both</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t59" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_funcs</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t60" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t61" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">=</span> <span class="nam">locdep_decay_switch</span><span class="strut">&nbsp;</span></p>
<p id="t62" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">att_decay_funcs</span> <span class="op">=</span> <span class="op">{</span><span class="str">"off"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att_org</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t63" class="pln">                                <span class="str">"on"</span> <span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att_locdep</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t64" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_decay_funcs</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t65" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t66" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span> <span class="op">=</span> <span class="nam">exponents</span><span class="com">#1, 2</span><span class="strut">&nbsp;</span></p>
<p id="t67" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t68" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_oms</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t69" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_sigmas</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t70" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">logged_cf</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t71" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">logged_z</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t72" class="pln">        <span class="com"># Parameters</span><span class="strut">&nbsp;</span></p>
<p id="t73" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t74" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t75" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t76" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t77" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t78" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t79" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t80" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t81" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t82" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t83" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">phi</span> <span class="op">=</span> <span class="key">None</span> <span class="com"># should be over 1</span><span class="strut">&nbsp;</span></p>
<p id="t84" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t85" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span> <span class="op">=</span> <span class="key">None</span> <span class="com">#tuple (x,y)</span><span class="strut">&nbsp;</span></p>
<p id="t86" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="op">=</span> <span class="num">50</span> <span class="op">/</span> <span class="num">1000</span><span class="strut">&nbsp;</span></p>
<p id="t87" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span> <span class="op">=</span> <span class="num">100</span> <span class="op">/</span> <span class="num">1000</span><span class="strut">&nbsp;</span></p>
<p id="t88" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t89" class="pln">        <span class="com"># Data</span><span class="strut">&nbsp;</span></p>
<p id="t90" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span> <span class="op">=</span> <span class="nam">data_range</span>  <span class="com">#  {'x':(0, 127), 'y':(0, 127)}</span><span class="strut">&nbsp;</span></p>
<p id="t91" class="pln">        <span class="com"># add kwargs as object attributes</span><span class="strut">&nbsp;</span></p>
<p id="t92" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">kwargs_dict</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t93" class="stm mis">            <span class="nam">self</span><span class="op">.</span><span class="nam">__dict__</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span><span class="nam">kwargs_dict</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t94" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t95" class="pln">    <span class="com"># HELPERS</span><span class="strut">&nbsp;</span></p>
<p id="t96" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t97" class="stm run hide_run">    <span class="key">def</span> <span class="nam">check_params_in_bounds</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t98" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t99" class="pln"><span class="str">        Checks if all specified parameters fall in the defined range of the model</span><span class="strut">&nbsp;</span></p>
<p id="t100" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t101" class="stm run hide_run">        <span class="nam">all_valid</span> <span class="op">=</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t102" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t103" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t104" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t105" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span> <span class="op">&lt;</span> <span class="num">15</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t106" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="op">&lt;</span> <span class="num">15</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t107" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t108" class="pln">                    <span class="op">(</span><span class="num">0</span> <span class="op">&lt;=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">&lt;=</span> <span class="num">1</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t109" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t110" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t111" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t112" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t113" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t114" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t115" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t116" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">phi</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">phi</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span> <span class="key">and</span> <span class="xx">\</span><span class="strut">&nbsp;</span></p>
<p id="t117" class="pln">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="op">(</span><span class="num">0</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span> <span class="op">&lt;</span> <span class="num">10000</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t118" class="stm run hide_run">        <span class="key">return</span> <span class="nam">all_valid</span><span class="strut">&nbsp;</span></p>
<p id="t119" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t120" class="stm run hide_run">    <span class="key">def</span> <span class="nam">check_params_for_config</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t121" class="pln">        <span class="str">""" Checks whether all necessary parameters are present for the current configuration. Prints "Looks Good" when all needed parameters are defined."""</span><span class="strut">&nbsp;</span></p>
<p id="t122" class="pln">        <span class="com"># basic params</span><span class="strut">&nbsp;</span></p>
<p id="t123" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t124" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t125" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t126" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t127" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t128" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t129" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t130" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t131" class="pln">        <span class="com"># Center bias</span><span class="strut">&nbsp;</span></p>
<p id="t132" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">==</span> <span class="str">"cb"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t133" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">)</span> <span class="op">==</span> <span class="num">2</span><span class="strut">&nbsp;</span></p>
<p id="t134" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t135" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"pre"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t136" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t137" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"post"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t138" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t139" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t140" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">phi</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t141" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t142" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">==</span> <span class="str">"on"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t143" class="stm run hide_run">            <span class="key">assert</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t144" class="stm run hide_run">        <span class="nam">print</span><span class="op">(</span><span class="str">"looks good"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t145" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t146" class="stm run hide_run">    <span class="key">def</span> <span class="nam">whoami</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t147" class="pln">        <span class="str">"""Returns the model identity as a string"""</span><span class="strut">&nbsp;</span></p>
<p id="t148" class="stm mis">        <span class="nam">id_str</span> <span class="op">=</span> <span class="str">"I am a scenewalk model, initialized with "</span><span class="strut">&nbsp;</span></p>
<p id="t149" class="stm mis">        <span class="nam">id_str</span> <span class="op">+=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">+</span> <span class="str">" activation, "</span><span class="strut">&nbsp;</span></p>
<p id="t150" class="stm mis">        <span class="nam">id_str</span> <span class="op">+=</span> <span class="str">"in "</span> <span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span><span class="op">)</span> <span class="op">+</span> <span class="str">" exponents mode"</span><span class="strut">&nbsp;</span></p>
<p id="t151" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"pre"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t152" class="stm mis">            <span class="nam">id_str</span> <span class="op">+=</span> <span class="str">", using a presaccadic shift"</span><span class="strut">&nbsp;</span></p>
<p id="t153" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"post"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t154" class="stm mis">            <span class="nam">id_str</span> <span class="op">+=</span> <span class="str">", using a postsaccadic shift"</span><span class="strut">&nbsp;</span></p>
<p id="t155" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">==</span> <span class="str">"on"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t156" class="stm mis">            <span class="nam">id_str</span> <span class="op">+=</span> <span class="str">", using location dependent attention decay"</span><span class="strut">&nbsp;</span></p>
<p id="t157" class="stm mis">        <span class="key">return</span> <span class="nam">id_str</span><span class="strut">&nbsp;</span></p>
<p id="t158" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t159" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_params</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t160" class="pln">        <span class="str">"""Returns the current parameters as a dictionary"""</span><span class="strut">&nbsp;</span></p>
<p id="t161" class="stm run hide_run">        <span class="nam">p_list</span> <span class="op">=</span> <span class="nam">OrderedDict</span><span class="op">(</span><span class="op">{</span><span class="strut">&nbsp;</span></p>
<p id="t162" class="pln">            <span class="str">"omegaAttention"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t163" class="pln">            <span class="str">"omegaInhib"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t164" class="pln">            <span class="str">"sigmaAttention"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t165" class="pln">            <span class="str">"sigmaInhib"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t166" class="pln">            <span class="str">"gamma"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span><span class="strut">&nbsp;</span></p>
<p id="t167" class="pln">        <span class="op">}</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t168" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span> <span class="op">==</span> <span class="num">2</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t169" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"lamb"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span><span class="strut">&nbsp;</span></p>
<p id="t170" class="stm run hide_run">        <span class="nam">p_list</span><span class="op">[</span><span class="str">"inhibStrength"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span><span class="strut">&nbsp;</span></p>
<p id="t171" class="stm run hide_run">        <span class="nam">p_list</span><span class="op">[</span><span class="str">"zeta"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span><span class="strut">&nbsp;</span></p>
<p id="t172" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t173" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"post"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t174" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"sigmaShift"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span><span class="strut">&nbsp;</span></p>
<p id="t175" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"shift_size"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span><span class="strut">&nbsp;</span></p>
<p id="t176" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"phi"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">phi</span><span class="strut">&nbsp;</span></p>
<p id="t177" class="pln">        <span class="com"># Center bias</span><span class="strut">&nbsp;</span></p>
<p id="t178" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">==</span> <span class="str">"cb"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t179" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"omega first"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span><span class="strut">&nbsp;</span></p>
<p id="t180" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"cb_sd_x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t181" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"cb_sd_y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t182" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">==</span> <span class="str">"on"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t183" class="stm run hide_run">            <span class="nam">p_list</span><span class="op">[</span><span class="str">"omega_prevloc"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span><span class="strut">&nbsp;</span></p>
<p id="t184" class="stm run hide_run">        <span class="key">return</span> <span class="nam">p_list</span><span class="strut">&nbsp;</span></p>
<p id="t185" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t186" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_param_list_order</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t187" class="pln">        <span class="str">""" Returns the names and order of the parameters required by the current model configuration"""</span><span class="strut">&nbsp;</span></p>
<p id="t188" class="stm run hide_run">        <span class="nam">param_names</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t189" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_oms</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t190" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"omegaAttention"</span><span class="op">,</span> <span class="str">"omfrac"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t191" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t192" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"omegaAttention"</span><span class="op">,</span> <span class="str">"omegaInhib"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t193" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_sigmas</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t194" class="stm mis">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"sigmaAttention"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t195" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t196" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"sigmaAttention"</span><span class="op">,</span> <span class="str">"sigmaInhib"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t197" class="stm run hide_run">        <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"gamma"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t198" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span> <span class="op">==</span> <span class="num">2</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t199" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"lamb"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t200" class="stm run hide_run">        <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"inhibStrength"</span><span class="op">,</span> <span class="str">"zeta"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t201" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"post"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t202" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"sigmaShift"</span><span class="op">,</span> <span class="str">"shift_size"</span><span class="op">,</span> <span class="str">"phi"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t203" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">==</span> <span class="str">"cb"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t204" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"first_fix_OmegaAttention"</span><span class="op">,</span> <span class="str">"cb_sd_x"</span><span class="op">,</span> <span class="str">"cb_sd_y"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t205" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">==</span> <span class="str">"on"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t206" class="stm run hide_run">            <span class="nam">param_names</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="op">[</span><span class="str">"omega_prevloc"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t207" class="stm run hide_run">        <span class="key">return</span> <span class="nam">param_names</span><span class="strut">&nbsp;</span></p>
<p id="t208" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t209" class="stm run hide_run">    <span class="key">def</span> <span class="nam">update_params</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">scene_walk_parameters</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t210" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t211" class="pln"><span class="str">        Update model parameters</span><span class="strut">&nbsp;</span></p>
<p id="t212" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t213" class="pln"><span class="str">            - scene walk params either as list (not numpy array!) or as dict</span><span class="strut">&nbsp;</span></p>
<p id="t214" class="pln"><span class="str">        Returns left over parameters when list of the wrong size is passed.</span><span class="strut">&nbsp;</span></p>
<p id="t215" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t216" class="stm run hide_run">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">scene_walk_parameters</span><span class="op">,</span> <span class="nam">dict</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t217" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_oms</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t218" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"omegaAttention"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t219" class="stm run hide_run">                <span class="nam">omfrac</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"omfrac"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t220" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">/</span> <span class="nam">omfrac</span><span class="strut">&nbsp;</span></p>
<p id="t221" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t222" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"omegaAttention"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t223" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"omegaInhib"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t224" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"sigmaAttention"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t225" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_sigmas</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t226" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"sigmaAttention"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t227" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t228" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"sigmaInhib"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t229" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"gamma"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t230" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t231" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span><span class="strut">&nbsp;</span></p>
<p id="t232" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t233" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"lamb"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t234" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">logged_cf</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t235" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">=</span> <span class="num">10</span> <span class="op">**</span> <span class="op">(</span><span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"inhibStrength"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t236" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t237" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"inhibStrength"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t238" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">logged_z</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t239" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">=</span> <span class="num">10</span> <span class="op">**</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"zeta"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t240" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t241" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"zeta"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t242" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"post"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t243" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"sigmaShift"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t244" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"shift_size"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t245" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">phi</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"phi"</span><span class="op">]</span>  <span class="com"># should be over 1</span><span class="strut">&nbsp;</span></p>
<p id="t246" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">==</span> <span class="str">"cb"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t247" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"first_fix_OmegaAttention"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t248" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span> <span class="op">=</span> <span class="op">(</span><span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"cb_sd_x"</span><span class="op">]</span><span class="op">,</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"cb_sd_y"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t249" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">==</span> <span class="str">"on"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t250" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">[</span><span class="str">"omega_prevloc"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t251" class="stm run hide_run">        <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">scene_walk_parameters</span><span class="op">,</span> <span class="nam">list</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t252" class="stm run hide_run">            <span class="nam">scene_walk_params</span> <span class="op">=</span> <span class="nam">scene_walk_parameters</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t253" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t254" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_oms</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t255" class="stm run hide_run">                <span class="nam">omfrac</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t256" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span> <span class="op">/</span> <span class="nam">omfrac</span><span class="strut">&nbsp;</span></p>
<p id="t257" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t258" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t259" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t260" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">coupled_sigmas</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t261" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span><span class="strut">&nbsp;</span></p>
<p id="t262" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t263" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t264" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t265" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t266" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span><span class="strut">&nbsp;</span></p>
<p id="t267" class="stm run hide_run">            <span class="key">elif</span> <span class="nam">self</span><span class="op">.</span><span class="nam">exponents</span> <span class="op">==</span> <span class="num">2</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t268" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t269" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t270" class="stm mis">                <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="str">"invalid exponent input"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t271" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">logged_cf</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t272" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">=</span> <span class="num">10</span> <span class="op">**</span> <span class="op">(</span><span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t273" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t274" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t275" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">logged_z</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t276" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">=</span> <span class="num">10</span> <span class="op">**</span> <span class="op">(</span><span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t277" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t278" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t279" class="pln">            <span class="com"># lars</span><span class="strut">&nbsp;</span></p>
<p id="t280" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"post"</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shifts</span> <span class="op">==</span> <span class="str">"both"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t281" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t282" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t283" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">phi</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span>  <span class="com"># should be over 1</span><span class="strut">&nbsp;</span></p>
<p id="t284" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">==</span> <span class="str">"cb"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t285" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t286" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span> <span class="op">=</span> <span class="op">(</span><span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="op">,</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t287" class="stm run hide_run">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">locdep_decay_switch</span> <span class="op">==</span> <span class="str">"on"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t288" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span> <span class="op">=</span> <span class="nam">scene_walk_params</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t289" class="stm run hide_run">            <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">scene_walk_params</span><span class="op">)</span> <span class="op">!=</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t290" class="stm mis">                <span class="nam">warnings</span><span class="op">.</span><span class="nam">warn</span><span class="op">(</span><span class="str">"You passed more parameters than your model can use. Why would you do that?"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t291" class="stm mis">                <span class="key">return</span> <span class="nam">scene_walk_params</span><span class="strut">&nbsp;</span></p>
<p id="t292" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t293" class="stm mis">            <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="str">"Data Type Error: you need to provide the parameters as either a dict or a list"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t294" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t295" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t296" class="stm run hide_run">    <span class="key">def</span> <span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dat</span><span class="op">,</span> <span class="nam">dim</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t297" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t298" class="pln"><span class="str">        Converts degree values to pixels on the grid.</span><span class="strut">&nbsp;</span></p>
<p id="t299" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t300" class="pln"><span class="str">            - dat : number to convert in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t301" class="pln"><span class="str">            - dim ['x' or 'y']: dimension along whcih to convert</span><span class="strut">&nbsp;</span></p>
<p id="t302" class="pln"><span class="str">            - fix [True or False]: if true, returned pixel value is between 0 and 127 (in the grid)</span><span class="strut">&nbsp;</span></p>
<p id="t303" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t304" class="pln"><span class="str">            - pixel value</span><span class="strut">&nbsp;</span></p>
<p id="t305" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t306" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputs_in_deg</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t307" class="stm mis">            <span class="key">return</span> <span class="nam">dat</span><span class="strut">&nbsp;</span></p>
<p id="t308" class="stm run hide_run">        <span class="key">if</span> <span class="nam">fix</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t309" class="stm run hide_run">            <span class="nam">dat_px</span> <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="nam">dat</span> <span class="op">-</span> <span class="nam">min</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">max</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="nam">min</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="num">128</span><span class="strut">&nbsp;</span></p>
<p id="t310" class="stm run hide_run">            <span class="nam">dat_px</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">floor</span><span class="op">(</span><span class="nam">dat_px</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t311" class="stm run hide_run">            <span class="nam">dat_px</span> <span class="op">=</span> <span class="num">127</span> <span class="key">if</span> <span class="nam">dat_px</span> <span class="op">>=</span> <span class="num">128</span> <span class="key">else</span> <span class="nam">dat_px</span><span class="strut">&nbsp;</span></p>
<p id="t312" class="stm run hide_run">            <span class="nam">dat_px</span> <span class="op">=</span> <span class="num">0</span> <span class="key">if</span> <span class="nam">dat_px</span> <span class="op">&lt;=</span> <span class="num">0</span> <span class="key">else</span> <span class="nam">dat_px</span><span class="strut">&nbsp;</span></p>
<p id="t313" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t314" class="stm run hide_run">            <span class="nam">dat_px</span> <span class="op">=</span> <span class="op">(</span><span class="nam">dat</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">max</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="nam">min</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="num">128</span><span class="strut">&nbsp;</span></p>
<p id="t315" class="stm run hide_run">            <span class="nam">dat_px</span> <span class="op">=</span> <span class="num">0.1</span> <span class="key">if</span> <span class="nam">dat_px</span> <span class="op">&lt;</span> <span class="num">0.1</span> <span class="key">else</span> <span class="nam">dat_px</span><span class="strut">&nbsp;</span></p>
<p id="t316" class="stm run hide_run">        <span class="key">return</span> <span class="nam">dat_px</span><span class="strut">&nbsp;</span></p>
<p id="t317" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t318" class="stm run hide_run">    <span class="key">def</span> <span class="nam">convert_px_to_deg</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dat</span><span class="op">,</span> <span class="nam">dim</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t319" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t320" class="pln"><span class="str">        Converts pixel values to degrees on the grid.</span><span class="strut">&nbsp;</span></p>
<p id="t321" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t322" class="pln"><span class="str">            - dat : number to convert in pixels</span><span class="strut">&nbsp;</span></p>
<p id="t323" class="pln"><span class="str">            - dim ['x' or 'y']: dimension along whcih to convert</span><span class="strut">&nbsp;</span></p>
<p id="t324" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t325" class="pln"><span class="str">            - degree value</span><span class="strut">&nbsp;</span></p>
<p id="t326" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t327" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputs_in_deg</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t328" class="stm mis">            <span class="key">return</span> <span class="nam">dat</span><span class="strut">&nbsp;</span></p>
<p id="t329" class="stm run hide_run">        <span class="nam">dat_deg</span> <span class="op">=</span> <span class="op">(</span><span class="nam">dat</span> <span class="op">/</span> <span class="num">128</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">max</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="nam">min</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="nam">min</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">data_range</span><span class="op">[</span><span class="nam">dim</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t330" class="stm run hide_run">        <span class="key">return</span> <span class="nam">dat_deg</span><span class="strut">&nbsp;</span></p>
<p id="t331" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t332" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_unit_vector</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">point1</span><span class="op">,</span> <span class="nam">point2</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t333" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t334" class="pln"><span class="str">        point1 is the origin. Vector goes toward point 2.</span><span class="strut">&nbsp;</span></p>
<p id="t335" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t336" class="pln"><span class="str">            - point1, point2 [iterables of shape (x, y)]: points between which to find the unit vector</span><span class="strut">&nbsp;</span></p>
<p id="t337" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t338" class="pln"><span class="str">            - [unit vector x, unit vector y], magnitude</span><span class="strut">&nbsp;</span></p>
<p id="t339" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t340" class="pln">        <span class="com"># delta vector</span><span class="strut">&nbsp;</span></p>
<p id="t341" class="stm run hide_run">        <span class="nam">d_x</span> <span class="op">=</span> <span class="nam">point2</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">-</span> <span class="nam">point1</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t342" class="stm run hide_run">        <span class="nam">d_y</span> <span class="op">=</span> <span class="nam">point2</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">-</span> <span class="nam">point1</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t343" class="pln">        <span class="com"># find magnitude</span><span class="strut">&nbsp;</span></p>
<p id="t344" class="stm run hide_run">        <span class="nam">vec_magnitude</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sqrt</span><span class="op">(</span><span class="op">(</span><span class="nam">d_x</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="nam">d_y</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t345" class="stm run hide_run">        <span class="key">if</span> <span class="nam">vec_magnitude</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t346" class="pln">            <span class="com">#print(point1, point2)</span><span class="strut">&nbsp;</span></p>
<p id="t347" class="stm mis">            <span class="nam">warnings</span><span class="op">.</span><span class="nam">warn</span><span class="op">(</span><span class="str">"no movement between two fixations"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t348" class="stm mis">            <span class="nam">u_x</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t349" class="stm mis">            <span class="nam">u_y</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t350" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t351" class="pln">            <span class="com"># find unit vector</span><span class="strut">&nbsp;</span></p>
<p id="t352" class="stm run hide_run">            <span class="nam">u_x</span> <span class="op">=</span> <span class="nam">d_x</span> <span class="op">/</span> <span class="nam">vec_magnitude</span><span class="strut">&nbsp;</span></p>
<p id="t353" class="stm run hide_run">            <span class="nam">u_y</span> <span class="op">=</span> <span class="nam">d_y</span> <span class="op">/</span> <span class="nam">vec_magnitude</span><span class="strut">&nbsp;</span></p>
<p id="t354" class="stm run hide_run">        <span class="key">return</span> <span class="op">[</span><span class="nam">u_x</span><span class="op">,</span> <span class="nam">u_y</span><span class="op">]</span><span class="op">,</span> <span class="nam">vec_magnitude</span><span class="strut">&nbsp;</span></p>
<p id="t355" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t356" class="stm run hide_run">    <span class="key">def</span> <span class="nam">simulate_durations</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">amount</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t357" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t358" class="pln"><span class="str">        generate durations from gamma distribtion.</span><span class="strut">&nbsp;</span></p>
<p id="t359" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t360" class="pln"><span class="str">            - amount [int]: number of durations to output</span><span class="strut">&nbsp;</span></p>
<p id="t361" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t362" class="pln"><span class="str">            - vector of durations</span><span class="strut">&nbsp;</span></p>
<p id="t363" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t364" class="stm run hide_run">        <span class="key">from</span> <span class="nam">scipy</span><span class="op">.</span><span class="nam">stats</span> <span class="key">import</span> <span class="nam">gamma</span><span class="strut">&nbsp;</span></p>
<p id="t365" class="stm run hide_run">        <span class="nam">durations</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t366" class="stm run hide_run">        <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">amount</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t367" class="stm run hide_run">            <span class="nam">duration</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">floor</span><span class="op">(</span><span class="nam">gamma</span><span class="op">.</span><span class="nam">rvs</span><span class="op">(</span><span class="nam">a</span><span class="op">=</span><span class="num">100</span><span class="op">,</span> <span class="nam">scale</span><span class="op">=</span><span class="num">2.5</span><span class="op">,</span> <span class="nam">size</span><span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="num">1000</span><span class="strut">&nbsp;</span></p>
<p id="t368" class="stm run hide_run">            <span class="nam">durations</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">duration</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t369" class="stm run hide_run">        <span class="key">return</span> <span class="nam">durations</span><span class="strut">&nbsp;</span></p>
<p id="t370" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t371" class="stm run hide_run">    <span class="key">def</span> <span class="nam">empirical_fixation_density</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">x_locs_deg</span><span class="op">,</span> <span class="nam">y_locs_deg</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t372" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t373" class="pln"><span class="str">        Calculates the empirical fixation density given fixation points and range information using the "scott" bandwidth</span><span class="strut">&nbsp;</span></p>
<p id="t374" class="pln"><span class="str">        (as in Heiko's paper)</span><span class="strut">&nbsp;</span></p>
<p id="t375" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t376" class="pln"><span class="str">            - x_locs_deg, y_locs_deg: coordinates in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t377" class="pln"><span class="str">        Outputs:</span><span class="strut">&nbsp;</span></p>
<p id="t378" class="pln"><span class="str">            - x_locs_px, y_locs_px: coordinates in ps</span><span class="strut">&nbsp;</span></p>
<p id="t379" class="pln"><span class="str">            - density map</span><span class="strut">&nbsp;</span></p>
<p id="t380" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t381" class="stm run hide_run">        <span class="key">from</span> <span class="nam">scipy</span><span class="op">.</span><span class="nam">stats</span> <span class="key">import</span> <span class="nam">kde</span><span class="strut">&nbsp;</span></p>
<p id="t382" class="pln">        <span class="com"># reduce grid to 128x128</span><span class="strut">&nbsp;</span></p>
<p id="t383" class="pln">        <span class="com"># watch out these are NOT indexes!!</span><span class="strut">&nbsp;</span></p>
<p id="t384" class="stm run hide_run">        <span class="nam">x_locs_px</span> <span class="op">=</span> <span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="str">'x'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">x_locs_deg</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t385" class="stm run hide_run">        <span class="nam">y_locs_px</span> <span class="op">=</span> <span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">y</span><span class="op">,</span> <span class="str">'y'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">for</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">y_locs_deg</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t386" class="pln">        <span class="com"># smooth</span><span class="strut">&nbsp;</span></p>
<p id="t387" class="stm run hide_run">        <span class="nam">k</span> <span class="op">=</span> <span class="nam">kde</span><span class="op">.</span><span class="nam">gaussian_kde</span><span class="op">(</span><span class="op">[</span><span class="nam">x_locs_px</span><span class="op">,</span> <span class="nam">y_locs_px</span><span class="op">]</span><span class="op">,</span> <span class="nam">bw_method</span><span class="op">=</span><span class="str">"scott"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t388" class="pln">        <span class="com"># resolution of image grid is 128x128</span><span class="strut">&nbsp;</span></p>
<p id="t389" class="stm run hide_run">        <span class="nam">xi</span><span class="op">,</span> <span class="nam">yi</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">float128</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">mgrid</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">128</span><span class="op">,</span> <span class="num">0</span><span class="op">:</span><span class="num">128</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t390" class="pln">        <span class="com"># apply smoothed data to grid</span><span class="strut">&nbsp;</span></p>
<p id="t391" class="stm run hide_run">        <span class="nam">zi</span> <span class="op">=</span> <span class="nam">k</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">vstack</span><span class="op">(</span><span class="op">[</span><span class="nam">yi</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">xi</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t392" class="pln">        <span class="com"># normalize</span><span class="strut">&nbsp;</span></p>
<p id="t393" class="stm run hide_run">        <span class="nam">zi</span> <span class="op">=</span> <span class="nam">zi</span><span class="op">/</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">zi</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t394" class="stm run hide_run">        <span class="nam">zi</span> <span class="op">=</span> <span class="nam">zi</span><span class="op">.</span><span class="nam">reshape</span><span class="op">(</span><span class="nam">xi</span><span class="op">.</span><span class="nam">shape</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t395" class="stm run hide_run">        <span class="key">return</span> <span class="nam">x_locs_px</span><span class="op">,</span> <span class="nam">y_locs_px</span><span class="op">,</span> <span class="nam">zi</span><span class="strut">&nbsp;</span></p>
<p id="t396" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t397" class="stm run hide_run">    <span class="key">def</span> <span class="nam">fixation_picker_max</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">likelihood_map</span><span class="op">,</span> <span class="nam">get_lik</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t398" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t399" class="pln"><span class="str">        Picks the next fixation location according to the maximum activation value (deterministic).</span><span class="strut">&nbsp;</span></p>
<p id="t400" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t401" class="pln"><span class="str">            - likelihood_map [128x128]: density from which to pick</span><span class="strut">&nbsp;</span></p>
<p id="t402" class="pln"><span class="str">            - get_lik [True or False]: return the points likelihood value or not</span><span class="strut">&nbsp;</span></p>
<p id="t403" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t404" class="pln"><span class="str">            - (x in degrees, y in degrees, (likelihood))</span><span class="strut">&nbsp;</span></p>
<p id="t405" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t406" class="stm run hide_run">        <span class="key">from</span> <span class="nam">random</span> <span class="key">import</span> <span class="nam">choice</span> <span class="key">as</span> <span class="nam">pick_val</span><span class="strut">&nbsp;</span></p>
<p id="t407" class="stm run hide_run">        <span class="nam">max_locs</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">argwhere</span><span class="op">(</span><span class="nam">likelihood_map</span> <span class="op">==</span> <span class="nam">np</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="nam">likelihood_map</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t408" class="stm run hide_run">        <span class="nam">i</span><span class="op">,</span> <span class="nam">j</span> <span class="op">=</span> <span class="nam">pick_val</span><span class="op">(</span><span class="nam">max_locs</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t409" class="stm run hide_run">        <span class="nam">x_deg</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_px_to_deg</span><span class="op">(</span><span class="nam">j</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t410" class="stm run hide_run">        <span class="nam">y_deg</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_px_to_deg</span><span class="op">(</span><span class="nam">i</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t411" class="stm run hide_run">        <span class="key">if</span> <span class="nam">get_lik</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t412" class="stm mis">            <span class="nam">lik</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">log2</span><span class="op">(</span><span class="nam">likelihood_map</span><span class="op">[</span><span class="nam">i</span><span class="op">,</span> <span class="nam">j</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t413" class="stm mis">            <span class="key">return</span><span class="op">(</span><span class="nam">x_deg</span><span class="op">,</span> <span class="nam">y_deg</span><span class="op">,</span> <span class="nam">lik</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t414" class="stm run hide_run">        <span class="key">return</span><span class="op">(</span><span class="nam">x_deg</span><span class="op">,</span> <span class="nam">y_deg</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t415" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t416" class="stm run hide_run">    <span class="key">def</span> <span class="nam">fixation_picker_stoch</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">likelihood_map</span><span class="op">,</span> <span class="nam">get_lik</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t417" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t418" class="pln"><span class="str">        Picks the next fixation location according to the cumulative probability method (linear selection algorithm)</span><span class="strut">&nbsp;</span></p>
<p id="t419" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t420" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t421" class="pln"><span class="str">            - likelihood_map [128x128]: density from which to pick</span><span class="strut">&nbsp;</span></p>
<p id="t422" class="pln"><span class="str">            - get_lik [True or False]: return the points likelihood value or not</span><span class="strut">&nbsp;</span></p>
<p id="t423" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t424" class="pln"><span class="str">            - (x in degrees, y in degrees, (likelihood))</span><span class="strut">&nbsp;</span></p>
<p id="t425" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t426" class="stm run hide_run">        <span class="nam">likelihood_map</span> <span class="op">=</span> <span class="nam">likelihood_map</span><span class="op">/</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">likelihood_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t427" class="stm run hide_run">        <span class="nam">r</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">rand</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t428" class="stm run hide_run">        <span class="nam">cu</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">cumsum</span><span class="op">(</span><span class="nam">likelihood_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t429" class="stm run hide_run">        <span class="nam">cu</span> <span class="op">=</span> <span class="nam">cu</span><span class="op">.</span><span class="nam">reshape</span><span class="op">(</span><span class="nam">likelihood_map</span><span class="op">.</span><span class="nam">shape</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t430" class="stm run hide_run">        <span class="nam">i</span><span class="op">,</span> <span class="nam">j</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">argwhere</span><span class="op">(</span><span class="nam">cu</span> <span class="op">>=</span> <span class="nam">r</span><span class="op">)</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t431" class="stm run hide_run">        <span class="nam">x_deg</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_px_to_deg</span><span class="op">(</span><span class="nam">j</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t432" class="stm run hide_run">        <span class="nam">y_deg</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_px_to_deg</span><span class="op">(</span><span class="nam">i</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t433" class="stm run hide_run">        <span class="key">if</span> <span class="nam">get_lik</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t434" class="stm run hide_run">            <span class="nam">lik</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">log2</span><span class="op">(</span><span class="nam">likelihood_map</span><span class="op">[</span><span class="nam">i</span><span class="op">,</span> <span class="nam">j</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t435" class="stm run hide_run">            <span class="key">return</span><span class="op">(</span><span class="nam">x_deg</span><span class="op">,</span> <span class="nam">y_deg</span><span class="op">,</span> <span class="nam">lik</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t436" class="stm run hide_run">        <span class="key">return</span><span class="op">(</span><span class="nam">x_deg</span><span class="op">,</span> <span class="nam">y_deg</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t437" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t438" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t439" class="pln">    <span class="com"># COMPONENTS</span><span class="strut">&nbsp;</span></p>
<p id="t440" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t441" class="pln">    <span class="com"># init</span><span class="strut">&nbsp;</span></p>
<p id="t442" class="stm run hide_run">    <span class="key">def</span> <span class="nam">initialize_map_unif</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t443" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t444" class="pln"><span class="str">        Initializes a map with near 0 activation everywhere</span><span class="strut">&nbsp;</span></p>
<p id="t445" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t446" class="pln"><span class="str">            - map [128x128]</span><span class="strut">&nbsp;</span></p>
<p id="t447" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t448" class="stm run hide_run">        <span class="nam">map_init</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">EPS</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">float128</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">ones</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">shape</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t449" class="stm run hide_run">        <span class="key">return</span> <span class="nam">map_init</span><span class="strut">&nbsp;</span></p>
<p id="t450" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t451" class="stm run hide_run">    <span class="key">def</span> <span class="nam">initialize_center_bias</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t452" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t453" class="pln"><span class="str">        Initializes a map with with a central gaussian</span><span class="strut">&nbsp;</span></p>
<p id="t454" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t455" class="pln"><span class="str">            - map [128x128]</span><span class="strut">&nbsp;</span></p>
<p id="t456" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t457" class="stm run hide_run">        <span class="nam">cb_sd_x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t458" class="stm run hide_run">        <span class="nam">cb_sd_y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">cb_sd</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t459" class="stm run hide_run">        <span class="nam">mu</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="op">[</span><span class="num">64</span><span class="op">,</span> <span class="num">64</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t460" class="stm run hide_run">        <span class="nam">rad</span> <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span><span class="op">-</span><span class="nam">mu</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="nam">cb_sd_x</span><span class="op">**</span><span class="num">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_yy</span><span class="op">-</span><span class="nam">mu</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="nam">cb_sd_y</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">.</span><span class="nam">T</span><span class="strut">&nbsp;</span></p>
<p id="t461" class="stm run hide_run">        <span class="nam">mapAtt_init</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">pi</span> <span class="op">*</span> <span class="nam">cb_sd_x</span> <span class="op">*</span> <span class="nam">cb_sd_y</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="nam">rad</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t462" class="pln">        <span class="com">#normalize</span><span class="strut">&nbsp;</span></p>
<p id="t463" class="stm run hide_run">        <span class="nam">mapAtt_init</span> <span class="op">=</span> <span class="nam">mapAtt_init</span><span class="op">/</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">mapAtt_init</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t464" class="stm run hide_run">        <span class="key">return</span> <span class="nam">mapAtt_init</span><span class="strut">&nbsp;</span></p>
<p id="t465" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t466" class="pln">    <span class="com"># make gauss v1</span><span class="strut">&nbsp;</span></p>
<p id="t467" class="stm run hide_run">    <span class="key">def</span> <span class="nam">make_attention_gauss</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t468" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t469" class="pln"><span class="str">        make gaussian window at fixation point for attention</span><span class="strut">&nbsp;</span></p>
<p id="t470" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t471" class="pln"><span class="str">            - fixs_y, fixs_y, durations: tuples of the shape (previous, current, next) fixation locations in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t472" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t473" class="pln"><span class="str">            - gaussian attention map [128x128]</span><span class="strut">&nbsp;</span></p>
<p id="t474" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t475" class="stm run hide_run">        <span class="nam">fix_x</span> <span class="op">=</span> <span class="nam">fixs_x</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t476" class="stm run hide_run">        <span class="nam">fix_y</span> <span class="op">=</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t477" class="stm run hide_run">        <span class="nam">sigmaAttention_x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t478" class="stm run hide_run">        <span class="nam">sigmaAttention_y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaAttention</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t479" class="stm run hide_run">        <span class="nam">fix_x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fix_x</span><span class="op">,</span> <span class="str">'x'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t480" class="stm run hide_run">        <span class="nam">fix_y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fix_y</span><span class="op">,</span> <span class="str">'y'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t481" class="pln">        <span class="com"># equation 5</span><span class="strut">&nbsp;</span></p>
<p id="t482" class="pln">        <span class="com"># T fixes weird meshgrid thing</span><span class="strut">&nbsp;</span></p>
<p id="t483" class="stm run hide_run">        <span class="nam">rad</span> <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span> <span class="op">-</span> <span class="nam">fix_x</span><span class="op">)</span><span class="op">**</span> <span class="num">2</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">sigmaAttention_x</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_yy</span> <span class="op">-</span> <span class="nam">fix_y</span><span class="op">)</span><span class="op">**</span> <span class="num">2</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">sigmaAttention_y</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">.</span><span class="nam">T</span><span class="strut">&nbsp;</span></p>
<p id="t484" class="stm run hide_run">        <span class="nam">gaussAttention</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">pi</span> <span class="op">*</span> <span class="nam">sigmaAttention_x</span> <span class="op">*</span> <span class="nam">sigmaAttention_y</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="nam">rad</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t485" class="stm run hide_run">        <span class="key">return</span> <span class="nam">gaussAttention</span><span class="strut">&nbsp;</span></p>
<p id="t486" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t487" class="pln">    <span class="com"># make gauss v1</span><span class="strut">&nbsp;</span></p>
<p id="t488" class="stm run hide_run">    <span class="key">def</span> <span class="nam">make_attention_gauss_post_shift</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t489" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t490" class="pln"><span class="str">        make gaussian window at fixation point for attention and post saccadic remap</span><span class="strut">&nbsp;</span></p>
<p id="t491" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t492" class="pln"><span class="str">            - fixs_y, fixs_y, durations: tuple of the shape (previous, current, next) fixation locations in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t493" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t494" class="pln"><span class="str">            - gaussian attention map</span><span class="strut">&nbsp;</span></p>
<p id="t495" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t496" class="stm run hide_run">        <span class="nam">fix_x_prev</span> <span class="op">=</span> <span class="nam">fixs_x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t497" class="stm run hide_run">        <span class="nam">fix_y_prev</span> <span class="op">=</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t498" class="stm run hide_run">        <span class="nam">fix_x</span> <span class="op">=</span> <span class="nam">fixs_x</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t499" class="stm run hide_run">        <span class="nam">fix_y</span> <span class="op">=</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t500" class="pln">        <span class="com"># post saccadic attention shift</span><span class="strut">&nbsp;</span></p>
<p id="t501" class="stm run hide_run">        <span class="nam">sigmaShift_x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t502" class="stm run hide_run">        <span class="nam">sigmaShift_y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaShift</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t503" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t504" class="stm run hide_run">        <span class="nam">u</span><span class="op">,</span> <span class="nam">mag</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_unit_vector</span><span class="op">(</span><span class="op">[</span><span class="nam">fix_x_prev</span><span class="op">,</span> <span class="nam">fix_y_prev</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="nam">fix_x</span><span class="op">,</span> <span class="nam">fix_y</span><span class="op">]</span><span class="op">)</span> <span class="com"># done in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t505" class="stm run hide_run">        <span class="nam">shift_loc_x</span> <span class="op">=</span> <span class="nam">fix_x</span> <span class="op">+</span> <span class="op">(</span><span class="nam">u</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t506" class="stm run hide_run">        <span class="nam">shift_loc_y</span> <span class="op">=</span> <span class="nam">fix_y</span> <span class="op">+</span> <span class="op">(</span><span class="nam">u</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shift_size</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t507" class="stm run hide_run">        <span class="nam">shift_loc_x_px</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">shift_loc_x</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t508" class="stm run hide_run">        <span class="nam">shift_loc_y_px</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">shift_loc_y</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t509" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t510" class="stm run hide_run">        <span class="nam">rad</span> <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span><span class="op">-</span><span class="nam">shift_loc_x_px</span><span class="op">)</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="nam">sigmaShift_x</span><span class="op">**</span><span class="num">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_yy</span><span class="op">-</span><span class="nam">shift_loc_y_px</span><span class="op">)</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="nam">sigmaShift_y</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">.</span><span class="nam">T</span><span class="strut">&nbsp;</span></p>
<p id="t511" class="stm run hide_run">        <span class="nam">gaussAttention_shift</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">pi</span> <span class="op">*</span> <span class="nam">sigmaShift_x</span> <span class="op">*</span> <span class="nam">sigmaShift_y</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="nam">rad</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t512" class="stm run hide_run">        <span class="key">return</span> <span class="nam">gaussAttention_shift</span><span class="strut">&nbsp;</span></p>
<p id="t513" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t514" class="stm run hide_run">    <span class="key">def</span> <span class="nam">combine_att_fixdens</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">gaussAttention</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t515" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t516" class="pln"><span class="str">        add empirical density information to gaussian attention mask</span><span class="strut">&nbsp;</span></p>
<p id="t517" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t518" class="pln"><span class="str">            - gaussAttention: attention mask (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t519" class="pln"><span class="str">            - fix_density_map: fixation desinty map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t520" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t521" class="pln"><span class="str">            - combined attention map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t522" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t523" class="pln">        <span class="com"># equation 8</span><span class="strut">&nbsp;</span></p>
<p id="t524" class="stm run hide_run">        <span class="nam">salFixation</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">multiply</span><span class="op">(</span><span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">gaussAttention</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t525" class="stm run hide_run">        <span class="nam">salFixation</span> <span class="op">=</span> <span class="nam">salFixation</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">salFixation</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t526" class="stm run hide_run">        <span class="key">return</span> <span class="nam">salFixation</span><span class="strut">&nbsp;</span></p>
<p id="t527" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t528" class="stm run hide_run">    <span class="key">def</span> <span class="nam">make_inhib_gauss</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t529" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t530" class="pln"><span class="str">        make gaussian window at fixation point for inhibition</span><span class="strut">&nbsp;</span></p>
<p id="t531" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t532" class="pln"><span class="str">            - fix_y, fix_y: current fixation location in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t533" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t534" class="pln"><span class="str">            - gaussian inhibition map</span><span class="strut">&nbsp;</span></p>
<p id="t535" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t536" class="stm run hide_run">        <span class="nam">fix_x</span> <span class="op">=</span> <span class="nam">fixs_x</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t537" class="stm run hide_run">        <span class="nam">fix_y</span> <span class="op">=</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t538" class="stm run hide_run">        <span class="nam">sigmaInhib_x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span><span class="op">,</span> <span class="str">'x'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t539" class="stm run hide_run">        <span class="nam">sigmaInhib_y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">sigmaInhib</span><span class="op">,</span> <span class="str">'y'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t540" class="stm run hide_run">        <span class="nam">fix_x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fix_x</span><span class="op">,</span> <span class="str">'x'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t541" class="stm run hide_run">        <span class="nam">fix_y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fix_y</span><span class="op">,</span> <span class="str">'y'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t542" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t543" class="pln">        <span class="com"># equation 5</span><span class="strut">&nbsp;</span></p>
<p id="t544" class="pln">        <span class="com"># T fixes weird meshgrid thing</span><span class="strut">&nbsp;</span></p>
<p id="t545" class="stm run hide_run">        <span class="nam">rad</span> <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span> <span class="op">-</span> <span class="nam">fix_x</span><span class="op">)</span><span class="op">**</span> <span class="num">2</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">sigmaInhib_x</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_yy</span> <span class="op">-</span> <span class="nam">fix_y</span><span class="op">)</span><span class="op">**</span> <span class="num">2</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">sigmaInhib_y</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">.</span><span class="nam">T</span><span class="strut">&nbsp;</span></p>
<p id="t546" class="stm run hide_run">        <span class="nam">gaussInhib</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">pi</span> <span class="op">*</span> <span class="nam">sigmaInhib_x</span> <span class="op">*</span> <span class="nam">sigmaInhib_y</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="nam">rad</span> <span class="op">/</span> <span class="op">(</span><span class="num">2</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">**</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t547" class="stm run hide_run">        <span class="key">return</span> <span class="nam">gaussInhib</span><span class="strut">&nbsp;</span></p>
<p id="t548" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t549" class="stm run hide_run">    <span class="key">def</span> <span class="nam">combine_subtractive</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">mapAtt</span><span class="op">,</span> <span class="nam">mapInhib</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t550" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t551" class="pln"><span class="str">        Combine attention and inhibition in a subtractive way</span><span class="strut">&nbsp;</span></p>
<p id="t552" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t553" class="pln"><span class="str">            - attention map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t554" class="pln"><span class="str">            - inhibition map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t555" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t556" class="pln"><span class="str">            - combined map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t557" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t558" class="pln">        <span class="com"># equation 10</span><span class="strut">&nbsp;</span></p>
<p id="t559" class="stm run hide_run">        <span class="nam">mapAttPower</span> <span class="op">=</span> <span class="nam">mapAtt</span> <span class="op">**</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span><span class="strut">&nbsp;</span></p>
<p id="t560" class="stm run hide_run">        <span class="nam">mapAttPowerNorm</span> <span class="op">=</span> <span class="nam">mapAttPower</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">mapAttPower</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t561" class="pln">        <span class="com"># handle numerical problem 1</span><span class="strut">&nbsp;</span></p>
<p id="t562" class="stm run hide_run">        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">isnan</span><span class="op">(</span><span class="nam">mapAttPowerNorm</span><span class="op">)</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t563" class="stm mis">            <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t564" class="pln">                <span class="str">"Value of *lambda* is too large. All of mapAttPower is flushed to zero."</span><span class="op">+</span><span class="nam">self</span><span class="op">.</span><span class="nam">whoami</span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="str">" params "</span><span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">get_params</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t565" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t566" class="stm run hide_run">        <span class="nam">mapInhibPower</span> <span class="op">=</span> <span class="nam">mapInhib</span> <span class="op">**</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span><span class="strut">&nbsp;</span></p>
<p id="t567" class="stm run hide_run">        <span class="nam">mapInhibPowerNorm</span> <span class="op">=</span> <span class="nam">mapInhibPower</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">mapInhibPower</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t568" class="pln">        <span class="com"># handle numerical problem 1</span><span class="strut">&nbsp;</span></p>
<p id="t569" class="stm run hide_run">        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">isnan</span><span class="op">(</span><span class="nam">mapInhibPowerNorm</span><span class="op">)</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t570" class="stm mis">            <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t571" class="pln">                <span class="str">"Value of *gamma* is too large. All of mapInhibPower is flushed to zero."</span><span class="op">+</span><span class="nam">self</span><span class="op">.</span><span class="nam">whoami</span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="str">" params "</span><span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">get_params</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t572" class="pln">        <span class="com"># do this with just always making both the same instead??</span><span class="strut">&nbsp;</span></p>
<p id="t573" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">mapAttPowerNorm</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span> <span class="op">*</span> <span class="nam">mapInhibPowerNorm</span><span class="strut">&nbsp;</span></p>
<p id="t574" class="stm run hide_run">        <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t575" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t576" class="stm run hide_run">    <span class="key">def</span> <span class="nam">combine_divisive</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">mapAtt</span><span class="op">,</span> <span class="nam">mapInhib</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t577" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t578" class="pln"><span class="str">        Combine attention and inhibition in a divisive way</span><span class="strut">&nbsp;</span></p>
<p id="t579" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t580" class="pln"><span class="str">            - attention map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t581" class="pln"><span class="str">            - inhibition map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t582" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t583" class="pln"><span class="str">            - combined map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t584" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t585" class="stm run hide_run">        <span class="nam">mapAttPower</span> <span class="op">=</span> <span class="nam">mapAtt</span> <span class="op">**</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lamb</span><span class="strut">&nbsp;</span></p>
<p id="t586" class="stm run hide_run">        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">mapAttPower</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t587" class="stm mis">            <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t588" class="pln">                <span class="str">"Value of *lambda* is too large. All of mapAttPower is flushed to zero."</span><span class="op">+</span><span class="nam">self</span><span class="op">.</span><span class="nam">whoami</span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="str">" params "</span><span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">get_params</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t589" class="stm run hide_run">        <span class="nam">mapInhibPower</span> <span class="op">=</span> <span class="nam">mapInhib</span> <span class="op">**</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span><span class="strut">&nbsp;</span></p>
<p id="t590" class="stm run hide_run">        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">mapInhibPower</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t591" class="stm mis">            <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t592" class="pln">                <span class="str">"Value of *lambda* is too large. All of mapAttPower is flushed to zero."</span><span class="op">+</span><span class="nam">self</span><span class="op">.</span><span class="nam">whoami</span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="str">" params "</span><span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">get_params</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t593" class="pln">        <span class="com"># Normalizes ihib strength parameter to refer to how strong inhib is compared to random activation</span><span class="strut">&nbsp;</span></p>
<p id="t594" class="stm run hide_run">        <span class="nam">inhibStrengthNorm</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inhibStrength</span><span class="op">/</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">MAP_SIZE</span><span class="op">**</span><span class="num">2</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t595" class="pln">        <span class="com"># cast to float before adding to other float.</span><span class="strut">&nbsp;</span></p>
<p id="t596" class="pln">        <span class="com"># If we dont do this, recusion errors ensue (possibly implicit casting problem?)</span><span class="strut">&nbsp;</span></p>
<p id="t597" class="stm run hide_run">        <span class="nam">inhibStrength_power</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">float128</span><span class="op">(</span><span class="op">(</span><span class="nam">inhibStrengthNorm</span> <span class="op">**</span> <span class="nam">self</span><span class="op">.</span><span class="nam">gamma</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t598" class="stm run hide_run">        <span class="nam">weighted_mapInhib</span> <span class="op">=</span> <span class="nam">inhibStrength_power</span> <span class="op">+</span> <span class="nam">mapInhibPower</span><span class="strut">&nbsp;</span></p>
<p id="t599" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">divide</span><span class="op">(</span><span class="nam">mapAttPower</span><span class="op">,</span> <span class="nam">weighted_mapInhib</span><span class="op">)</span>  <span class="com"># divisive inhibition</span><span class="strut">&nbsp;</span></p>
<p id="t600" class="stm run hide_run">        <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t601" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t602" class="stm run hide_run">    <span class="key">def</span> <span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">duration</span><span class="op">,</span> <span class="nam">current_map</span><span class="op">,</span> <span class="nam">prev_map</span><span class="op">,</span> <span class="nam">omega</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t603" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t604" class="pln"><span class="str">        evolve the maps over time, given a decay paramter</span><span class="strut">&nbsp;</span></p>
<p id="t605" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t606" class="pln"><span class="str">            - duration: current fixation duration in seconds</span><span class="strut">&nbsp;</span></p>
<p id="t607" class="pln"><span class="str">            - current_map: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t608" class="pln"><span class="str">            - prev_map: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t609" class="pln"><span class="str">            - omega: decay parameter to use</span><span class="strut">&nbsp;</span></p>
<p id="t610" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t611" class="pln"><span class="str">            - evolved_map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t612" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t613" class="stm run hide_run">        <span class="nam">current_map</span> <span class="op">=</span> <span class="nam">current_map</span><span class="op">/</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">current_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t614" class="stm run hide_run">        <span class="nam">evolved_map</span> <span class="op">=</span> <span class="nam">current_map</span> <span class="op">+</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="nam">duration</span> <span class="op">*</span> <span class="nam">omega</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">prev_map</span> <span class="op">-</span> <span class="nam">current_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t615" class="stm run hide_run">        <span class="key">return</span> <span class="nam">evolved_map</span><span class="strut">&nbsp;</span></p>
<p id="t616" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t617" class="stm run hide_run">    <span class="key">def</span> <span class="nam">differential_time_att_org</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">duration</span><span class="op">,</span> <span class="nam">current_map</span><span class="op">,</span> <span class="nam">prev_map</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t618" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t619" class="pln"><span class="str">        evolve the maps over time using the attention decay parameter</span><span class="strut">&nbsp;</span></p>
<p id="t620" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t621" class="pln"><span class="str">            - duration: current fixation duration in seconds</span><span class="strut">&nbsp;</span></p>
<p id="t622" class="pln"><span class="str">            - current_map: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t623" class="pln"><span class="str">            - prev_map: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t624" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t625" class="pln"><span class="str">            - evolved_map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t626" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t627" class="stm run hide_run">        <span class="nam">current_map</span> <span class="op">=</span> <span class="nam">current_map</span><span class="op">/</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">current_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t628" class="stm run hide_run">        <span class="nam">evolved_map</span> <span class="op">=</span> <span class="nam">current_map</span> <span class="op">+</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="nam">duration</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">prev_map</span> <span class="op">-</span> <span class="nam">current_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t629" class="stm run hide_run">        <span class="key">return</span> <span class="nam">evolved_map</span><span class="strut">&nbsp;</span></p>
<p id="t630" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t631" class="stm run hide_run">    <span class="key">def</span> <span class="nam">differential_time_att_locdep</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">duration</span><span class="op">,</span> <span class="nam">current_map</span><span class="op">,</span> <span class="nam">prev_map</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">=</span><span class="key">None</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t632" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t633" class="pln"><span class="str">        evolve the maps over time with the normal attention decay parameter everywhere except around the previous fixation location</span><span class="strut">&nbsp;</span></p>
<p id="t634" class="pln"><span class="str">        Inputs</span><span class="strut">&nbsp;</span></p>
<p id="t635" class="pln"><span class="str">            - duration: current fixation duration in seconds</span><span class="strut">&nbsp;</span></p>
<p id="t636" class="pln"><span class="str">            - current_map: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t637" class="pln"><span class="str">            - prev_map: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t638" class="pln"><span class="str">            - fixs_x, fixs_y: tuple with (prev, current, next) fixation</span><span class="strut">&nbsp;</span></p>
<p id="t639" class="pln"><span class="str">        Outputs</span><span class="strut">&nbsp;</span></p>
<p id="t640" class="pln"><span class="str">            - evolved_map (128x128)</span><span class="strut">&nbsp;</span></p>
<p id="t641" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t642" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">fixs_x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t643" class="stm run hide_run">        <span class="key">assert</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t644" class="stm run hide_run">        <span class="nam">omega_locdep</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">ones</span><span class="op">(</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">MAP_SIZE</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">MAP_SIZE</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span><span class="strut">&nbsp;</span></p>
<p id="t645" class="stm run hide_run">        <span class="nam">j_prev</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="str">'x'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t646" class="stm run hide_run">        <span class="nam">i_prev</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fixs_y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="str">'y'</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t647" class="stm run hide_run">        <span class="nam">nelem</span> <span class="op">=</span> <span class="num">4</span><span class="strut">&nbsp;</span></p>
<p id="t648" class="stm run hide_run">        <span class="nam">omega_locdep</span><span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">clip</span><span class="op">(</span><span class="nam">i_prev</span> <span class="op">-</span> <span class="nam">nelem</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span> <span class="op">:</span> <span class="nam">i_prev</span> <span class="op">+</span> <span class="nam">nelem</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t649" class="pln">                     <span class="nam">np</span><span class="op">.</span><span class="nam">clip</span><span class="op">(</span><span class="nam">j_prev</span> <span class="op">-</span> <span class="nam">nelem</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span> <span class="op">:</span> <span class="nam">j_prev</span> <span class="op">+</span> <span class="nam">nelem</span> <span class="op">+</span> <span class="num">1</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omega_prevloc</span><span class="strut">&nbsp;</span></p>
<p id="t650" class="stm run hide_run">        <span class="nam">current_map</span> <span class="op">=</span> <span class="nam">current_map</span><span class="op">/</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">current_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t651" class="stm run hide_run">        <span class="nam">evolved_map</span> <span class="op">=</span> <span class="nam">current_map</span> <span class="op">+</span> <span class="nam">np</span><span class="op">.</span><span class="nam">exp</span><span class="op">(</span><span class="op">-</span><span class="nam">duration</span> <span class="op">*</span> <span class="nam">omega_locdep</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">prev_map</span> <span class="op">-</span> <span class="nam">current_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t652" class="stm run hide_run">        <span class="key">return</span> <span class="nam">evolved_map</span><span class="strut">&nbsp;</span></p>
<p id="t653" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t654" class="stm run hide_run">    <span class="key">def</span> <span class="nam">make_positive</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">u</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t655" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t656" class="pln"><span class="str">        cuts sub zero components</span><span class="strut">&nbsp;</span></p>
<p id="t657" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t658" class="pln"><span class="str">            - u: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t659" class="pln"><span class="str">        Outputs:</span><span class="strut">&nbsp;</span></p>
<p id="t660" class="pln"><span class="str">            - ustar: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t661" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t662" class="pln">        <span class="com"># equation 12</span><span class="strut">&nbsp;</span></p>
<p id="t663" class="stm run hide_run">        <span class="nam">ustar</span> <span class="op">=</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t664" class="stm run hide_run">        <span class="nam">ustar</span><span class="op">[</span><span class="nam">ustar</span> <span class="op">&lt;=</span> <span class="num">0</span><span class="op">]</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t665" class="pln">        <span class="com"># handle numerical problem 3:</span><span class="strut">&nbsp;</span></p>
<p id="t666" class="pln">        <span class="com"># if inhibStrength is too large, whole map can be negative, whole map is set to 0, cannot divide by sum 0</span><span class="strut">&nbsp;</span></p>
<p id="t667" class="pln">        <span class="com"># solution: make uniform</span><span class="strut">&nbsp;</span></p>
<p id="t668" class="stm run hide_run">        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">ustar</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t669" class="stm mis">            <span class="nam">ustar</span><span class="op">[</span><span class="op">:</span><span class="op">]</span> <span class="op">=</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t670" class="stm run hide_run">        <span class="nam">ustar</span> <span class="op">=</span> <span class="nam">ustar</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">ustar</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t671" class="stm run hide_run">        <span class="key">return</span> <span class="nam">ustar</span><span class="strut">&nbsp;</span></p>
<p id="t672" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t673" class="stm run hide_run">    <span class="key">def</span> <span class="nam">add_noise</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">ustar</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t674" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t675" class="pln"><span class="str">        adds zeta noise</span><span class="strut">&nbsp;</span></p>
<p id="t676" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t677" class="pln"><span class="str">            - ustar: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t678" class="pln"><span class="str">        Outputs:</span><span class="strut">&nbsp;</span></p>
<p id="t679" class="pln"><span class="str">            - uFinal: 128x128 map</span><span class="strut">&nbsp;</span></p>
<p id="t680" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t681" class="stm run hide_run">        <span class="nam">uFinal</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span><span class="op">)</span> <span class="op">*</span> <span class="nam">ustar</span> <span class="op">+</span> <span class="nam">self</span><span class="op">.</span><span class="nam">zeta</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">prod</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">shape</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">_xx</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t682" class="stm run hide_run">        <span class="key">return</span> <span class="nam">uFinal</span><span class="strut">&nbsp;</span></p>
<p id="t683" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t684" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_phase_times_both</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">durations</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t685" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t686" class="pln"><span class="str">        Helper function that computes the durations of each phase</span><span class="strut">&nbsp;</span></p>
<p id="t687" class="pln"><span class="str">        1. You always have the post phase, no matter what</span><span class="strut">&nbsp;</span></p>
<p id="t688" class="pln"><span class="str">        2. the main phase can be skipped if the post phase is already too long</span><span class="strut">&nbsp;</span></p>
<p id="t689" class="pln"><span class="str">        3. from the time that is left for the main phase we then subtract the pre phase. If that leaves the main phase less than 10 ms short, we skip the pre phase.</span><span class="strut">&nbsp;</span></p>
<p id="t690" class="pln"><span class="str">        4. The post phase is always skipped for the first fixation</span><span class="strut">&nbsp;</span></p>
<p id="t691" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t692" class="stm run hide_run">        <span class="key">if</span> <span class="nam">nth</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t693" class="stm run hide_run">            <span class="key">if</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">></span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t694" class="stm run hide_run">                <span class="nam">duration_post_ph</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span><span class="strut">&nbsp;</span></p>
<p id="t695" class="stm run hide_run">                <span class="key">if</span> <span class="op">(</span><span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">-</span><span class="nam">duration_post_ph</span><span class="op">)</span> <span class="op">></span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="op">+</span> <span class="op">(</span><span class="num">10</span> <span class="op">/</span> <span class="num">1000</span><span class="op">)</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t696" class="stm run hide_run">                    <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span><span class="strut">&nbsp;</span></p>
<p id="t697" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t698" class="stm run hide_run">                    <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t699" class="stm run hide_run">                <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">-</span> <span class="nam">duration_pre_ph</span> <span class="op">-</span> <span class="nam">duration_post_ph</span><span class="strut">&nbsp;</span></p>
<p id="t700" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t701" class="stm run hide_run">                <span class="nam">duration_post_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t702" class="stm run hide_run">                <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t703" class="stm run hide_run">                <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t704" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t705" class="stm run hide_run">            <span class="nam">duration_post_ph</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t706" class="stm run hide_run">            <span class="key">if</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">></span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="op">+</span> <span class="op">(</span><span class="num">10</span> <span class="op">/</span> <span class="num">1000</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t707" class="stm run hide_run">                <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span><span class="strut">&nbsp;</span></p>
<p id="t708" class="stm run hide_run">                <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">-</span> <span class="nam">duration_pre_ph</span><span class="strut">&nbsp;</span></p>
<p id="t709" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t710" class="stm run hide_run">                <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t711" class="stm run hide_run">                <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t712" class="stm run hide_run">        <span class="key">return</span> <span class="nam">duration_post_ph</span><span class="op">,</span> <span class="nam">duration_main_ph</span><span class="op">,</span> <span class="nam">duration_pre_ph</span><span class="strut">&nbsp;</span></p>
<p id="t713" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t714" class="pln">    <span class="com"># MECHANISMS</span><span class="strut">&nbsp;</span></p>
<p id="t715" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t716" class="pln">    <span class="com"># probably the way you would make this a bit faster would be by creating another level of abstraction: evolve_normal, evolve_pre and evolve_post which only update the att and inh streams, without combining.</span><span class="strut">&nbsp;</span></p>
<p id="t717" class="pln">    <span class="com"># then you would have the run mechanisms functions that just concatenate the evolve functions and then combine them in order to get likelihood values. This would make the code more opaque though. </span><span class="strut">&nbsp;</span></p>
<p id="t718" class="pln">    <span class="com"># Easier for dynamic plotting though...</span><span class="strut">&nbsp;</span></p>
<p id="t719" class="stm run hide_run">    <span class="key">def</span> <span class="nam">evolve_maps_main</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">durations</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t720" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t721" class="pln"><span class="str">        Evolve maps with basic model</span><span class="strut">&nbsp;</span></p>
<p id="t722" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t723" class="pln"><span class="str">            - fixs_y, fixs_y, durations: tuple of the shape (previous, current, next) fixation locations in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t724" class="pln"><span class="str">            - map_att_prev, map_inhib_prev [128x128]: previous maps</span><span class="strut">&nbsp;</span></p>
<p id="t725" class="pln"><span class="str">            - fix_density_map [128x128]: empirical fixation density of the image</span><span class="strut">&nbsp;</span></p>
<p id="t726" class="pln"><span class="str">            - nth: number of the fixation in the sequence</span><span class="strut">&nbsp;</span></p>
<p id="t727" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t728" class="pln"><span class="str">            - map_att, map_inhib, uFinal: attention-, inhibition-, and final map after the evolution</span><span class="strut">&nbsp;</span></p>
<p id="t729" class="pln"><span class="str">            - next_fix: tuple of coordinates for the next fixation in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t730" class="pln"><span class="str">            - LL: Likelihood of the next fixation</span><span class="strut">&nbsp;</span></p>
<p id="t731" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t732" class="pln">        <span class="com"># no locdep decay on first fix</span><span class="strut">&nbsp;</span></p>
<p id="t733" class="stm run hide_run">        <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_attention_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t734" class="stm run hide_run">        <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_att_fixdens</span><span class="op">(</span><span class="nam">map_att</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t735" class="pln">        <span class="com"># on the first fixation use center bias decay or regular</span><span class="strut">&nbsp;</span></p>
<p id="t736" class="stm run hide_run">        <span class="key">if</span> <span class="nam">nth</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t737" class="stm run hide_run">            <span class="key">if</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init_type</span> <span class="op">==</span> <span class="str">"cb"</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t738" class="stm run hide_run">                <span class="key">assert</span> <span class="key">not</span> <span class="nam">np</span><span class="op">.</span><span class="nam">isnan</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t739" class="stm run hide_run">                <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">first_fix_OmegaAttention</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t740" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t741" class="stm run hide_run">                <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t742" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t743" class="stm run hide_run">            <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att</span><span class="op">(</span><span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">=</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">=</span><span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t744" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t745" class="stm run hide_run">        <span class="nam">map_inhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_inhib_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t746" class="stm run hide_run">        <span class="nam">map_inhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">map_inhib</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t747" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine</span><span class="op">(</span><span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_inhib</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t748" class="stm run hide_run">        <span class="nam">ustar</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_positive</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t749" class="stm run hide_run">        <span class="nam">uFinal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">add_noise</span><span class="op">(</span><span class="nam">ustar</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t750" class="pln">        <span class="com"># get likelihood for next fixations</span><span class="strut">&nbsp;</span></p>
<p id="t751" class="stm run hide_run">        <span class="key">if</span> <span class="op">(</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">2</span><span class="op">]</span> <span class="key">is</span> <span class="key">None</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="nam">sim</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t752" class="stm run hide_run">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span><span class="op">,</span> <span class="nam">LL</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">fixation_picker_stoch</span><span class="op">(</span><span class="nam">uFinal</span><span class="op">,</span> <span class="nam">get_lik</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t753" class="stm run hide_run">            <span class="nam">next_fix</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t754" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t755" class="stm run hide_run">            <span class="nam">idx_j_next</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="str">"x"</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t756" class="stm run hide_run">            <span class="nam">idx_i_next</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">convert_deg_to_px</span><span class="op">(</span><span class="nam">fixs_y</span><span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="str">"y"</span><span class="op">,</span> <span class="nam">fix</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t757" class="stm run hide_run">            <span class="nam">LL</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">log2</span><span class="op">(</span><span class="nam">uFinal</span><span class="op">[</span><span class="nam">idx_i_next</span><span class="op">,</span> <span class="nam">idx_j_next</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t758" class="stm run hide_run">            <span class="nam">next_fix</span> <span class="op">=</span> <span class="op">(</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t759" class="stm run hide_run">        <span class="key">return</span> <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_inhib</span><span class="op">,</span> <span class="nam">uFinal</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span><span class="strut">&nbsp;</span></p>
<p id="t760" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t761" class="stm run hide_run">    <span class="key">def</span> <span class="nam">evolve_maps_postsac</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">durations</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t762" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t763" class="pln"><span class="str">        Evolve maps with postsaccadic shift.</span><span class="strut">&nbsp;</span></p>
<p id="t764" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t765" class="pln"><span class="str">            - fixs_y, fixs_y, durations: tuple of the shape (previous, current, next) fixation locations in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t766" class="pln"><span class="str">            - map_att_prev, map_inhib_prev [128x128]: previous maps</span><span class="strut">&nbsp;</span></p>
<p id="t767" class="pln"><span class="str">            - fix_density_map [128x128]: empirical fixation density of the image</span><span class="strut">&nbsp;</span></p>
<p id="t768" class="pln"><span class="str">            - nth: number of the fixation in the sequence</span><span class="strut">&nbsp;</span></p>
<p id="t769" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t770" class="pln"><span class="str">            - map_att, map_inhib, uFinal: attention-, inhibition-, and final map after the evolution</span><span class="strut">&nbsp;</span></p>
<p id="t771" class="pln"><span class="str">            - next_fix: tuple of coordinates for the next fixation in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t772" class="pln"><span class="str">            - LL: Likelihood of the next fixation</span><span class="strut">&nbsp;</span></p>
<p id="t773" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t774" class="pln">        <span class="com"># During Post phase we always have locdep decay. Post phase is always skipped on nth=1 anyway.</span><span class="strut">&nbsp;</span></p>
<p id="t775" class="stm run hide_run">        <span class="nam">skip_post</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t776" class="pln">        <span class="com"># skip_main = False</span><span class="strut">&nbsp;</span></p>
<p id="t777" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t778" class="pln">        <span class="com"># If the duration of the fixation is shorter than the discrete post shift time, just skip the main phase</span><span class="strut">&nbsp;</span></p>
<p id="t779" class="stm run hide_run">        <span class="key">if</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">></span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t780" class="stm run hide_run">            <span class="nam">duration_post_ph</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span><span class="strut">&nbsp;</span></p>
<p id="t781" class="stm run hide_run">            <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">-</span><span class="nam">self</span><span class="op">.</span><span class="nam">tau_post</span><span class="strut">&nbsp;</span></p>
<p id="t782" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t783" class="stm run hide_run">            <span class="nam">duration_post_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t784" class="stm run hide_run">            <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t785" class="pln">            <span class="com"># skip_main = True</span><span class="strut">&nbsp;</span></p>
<p id="t786" class="pln">        <span class="com"># on the first fixation we always skip the post phase (because no previous fixation exists)</span><span class="strut">&nbsp;</span></p>
<p id="t787" class="stm run hide_run">        <span class="key">if</span> <span class="nam">nth</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t788" class="stm run hide_run">            <span class="nam">skip_post</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t789" class="stm run hide_run">            <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t790" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t791" class="pln">        <span class="com"># POST PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t792" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">skip_post</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t793" class="stm run hide_run">            <span class="nam">map_att_post_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_attention_gauss_post_shift</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t794" class="stm run hide_run">            <span class="nam">map_att_post_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_att_fixdens</span><span class="op">(</span><span class="nam">map_att_post_shift</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t795" class="stm run hide_run">            <span class="nam">map_att_post_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att</span><span class="op">(</span><span class="nam">duration_post_ph</span><span class="op">,</span> <span class="nam">map_att_post_shift</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">=</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">=</span><span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t796" class="stm run hide_run">            <span class="nam">map_inhib_post_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_inhib_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t797" class="stm run hide_run">            <span class="nam">map_inhib_post_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">duration_post_ph</span><span class="op">,</span> <span class="nam">map_inhib_post_shift</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t798" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t799" class="stm run hide_run">            <span class="nam">map_att_post_shift</span> <span class="op">=</span> <span class="nam">map_att_prev</span><span class="strut">&nbsp;</span></p>
<p id="t800" class="stm run hide_run">            <span class="nam">map_inhib_post_shift</span> <span class="op">=</span> <span class="nam">map_inhib_prev</span><span class="strut">&nbsp;</span></p>
<p id="t801" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t802" class="pln">        <span class="com"># MAIN PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t803" class="pln">        <span class="com"># could use a skip main if statement, but then we need to combine maps in this function</span><span class="strut">&nbsp;</span></p>
<p id="t804" class="stm run hide_run">        <span class="nam">durations_dummy</span> <span class="op">=</span> <span class="op">(</span><span class="key">None</span><span class="op">,</span> <span class="nam">duration_main_ph</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t805" class="stm run hide_run">        <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_inhib</span><span class="op">,</span> <span class="nam">uFinal</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_main</span><span class="op">(</span><span class="nam">durations_dummy</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_post_shift</span><span class="op">,</span> <span class="nam">map_inhib_post_shift</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="nam">sim</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t806" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t807" class="stm run hide_run">        <span class="key">return</span> <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_inhib</span><span class="op">,</span> <span class="nam">uFinal</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span><span class="strut">&nbsp;</span></p>
<p id="t808" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t809" class="stm run hide_run">    <span class="key">def</span> <span class="nam">evolve_maps_presac</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">durations</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t810" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t811" class="pln"><span class="str">        Evolve maps with presaccadic shift.</span><span class="strut">&nbsp;</span></p>
<p id="t812" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t813" class="pln"><span class="str">            - fixs_y, fixs_y, durations: tuple of the shape (previous, current, next) fixation locations in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t814" class="pln"><span class="str">            - map_att_prev, map_inhib_prev [128x128]: previous maps</span><span class="strut">&nbsp;</span></p>
<p id="t815" class="pln"><span class="str">            - fix_density_map [128x128]: empirical fixation density of the image</span><span class="strut">&nbsp;</span></p>
<p id="t816" class="pln"><span class="str">            - nth: number of the fixation in the sequence</span><span class="strut">&nbsp;</span></p>
<p id="t817" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t818" class="pln"><span class="str">            - map_att, map_inhib, uFinal: attention-, inhibition-, and final map after the evolution</span><span class="strut">&nbsp;</span></p>
<p id="t819" class="pln"><span class="str">            - next_fix: tuple of coordinates for the next fixation in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t820" class="pln"><span class="str">            - LL: Likelihood of the next fixation</span><span class="strut">&nbsp;</span></p>
<p id="t821" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t822" class="stm run hide_run">        <span class="nam">skip_pre</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t823" class="stm run hide_run">        <span class="key">if</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">></span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span> <span class="op">+</span> <span class="op">(</span><span class="num">10</span><span class="op">/</span><span class="num">1000</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t824" class="stm run hide_run">            <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span><span class="strut">&nbsp;</span></p>
<p id="t825" class="stm run hide_run">            <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tau_pre</span><span class="strut">&nbsp;</span></p>
<p id="t826" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t827" class="stm run hide_run">            <span class="nam">duration_main_ph</span> <span class="op">=</span> <span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t828" class="stm run hide_run">            <span class="nam">skip_pre</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t829" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t830" class="pln">        <span class="com"># MAIN PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t831" class="stm run hide_run">        <span class="nam">durations_dummy</span> <span class="op">=</span> <span class="op">(</span><span class="key">None</span><span class="op">,</span> <span class="nam">duration_main_ph</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t832" class="stm run hide_run">        <span class="nam">map_att_main</span><span class="op">,</span> <span class="nam">map_inhib_main</span><span class="op">,</span> <span class="nam">uFinal_main</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_main</span><span class="op">(</span><span class="nam">durations_dummy</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="nam">sim</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t833" class="pln">        <span class="com"># pick the next location</span><span class="strut">&nbsp;</span></p>
<p id="t834" class="stm run hide_run">        <span class="key">if</span> <span class="nam">sim</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t835" class="stm run hide_run">            <span class="nam">fixs_x</span> <span class="op">=</span> <span class="op">(</span><span class="op">*</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t836" class="stm run hide_run">            <span class="nam">fixs_y</span> <span class="op">=</span> <span class="op">(</span><span class="op">*</span><span class="nam">fixs_y</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t837" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t838" class="pln">        <span class="com"># PRE PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t839" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">skip_pre</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t840" class="pln">            <span class="com"># get gauss centered around the upcoming location</span><span class="strut">&nbsp;</span></p>
<p id="t841" class="stm run hide_run">            <span class="nam">map_att_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_attention_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t842" class="stm run hide_run">            <span class="nam">map_att_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_att_fixdens</span><span class="op">(</span><span class="nam">map_att_shift</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t843" class="pln">            <span class="com"># no location dependent decay on fixation 1</span><span class="strut">&nbsp;</span></p>
<p id="t844" class="stm run hide_run">            <span class="key">if</span> <span class="key">not</span> <span class="nam">nth</span><span class="op">==</span><span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t845" class="stm run hide_run">                <span class="nam">map_att_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att</span><span class="op">(</span><span class="nam">duration_pre_ph</span><span class="op">,</span> <span class="nam">map_att_shift</span><span class="op">,</span> <span class="nam">map_att_main</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">=</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">=</span><span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t846" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t847" class="stm run hide_run">                <span class="nam">map_att_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">duration_pre_ph</span><span class="op">,</span> <span class="nam">map_att_shift</span><span class="op">,</span> <span class="nam">map_att_main</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t848" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t849" class="stm run hide_run">            <span class="nam">map_inhib_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_inhib_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t850" class="stm run hide_run">            <span class="nam">map_inhib_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">duration_pre_ph</span><span class="op">,</span> <span class="nam">map_inhib_pre</span><span class="op">,</span> <span class="nam">map_inhib_main</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t851" class="stm run hide_run">            <span class="nam">u</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine</span><span class="op">(</span><span class="nam">map_att_pre</span><span class="op">,</span> <span class="nam">map_inhib_pre</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t852" class="stm run hide_run">            <span class="nam">ustar</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_positive</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t853" class="stm run hide_run">            <span class="nam">uFinal_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">add_noise</span><span class="op">(</span><span class="nam">ustar</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t854" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t855" class="stm run hide_run">            <span class="nam">uFinal_pre</span> <span class="op">=</span> <span class="nam">uFinal_main</span><span class="strut">&nbsp;</span></p>
<p id="t856" class="stm run hide_run">            <span class="nam">map_inhib_pre</span> <span class="op">=</span> <span class="nam">map_inhib_main</span><span class="strut">&nbsp;</span></p>
<p id="t857" class="stm run hide_run">            <span class="nam">map_att_pre</span> <span class="op">=</span> <span class="nam">map_att_main</span><span class="strut">&nbsp;</span></p>
<p id="t858" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t859" class="pln">        <span class="com"># we return the state of after the presaccadic shift but the LL and picked fixation from before</span><span class="strut">&nbsp;</span></p>
<p id="t860" class="stm run hide_run">        <span class="key">return</span> <span class="nam">map_att_pre</span><span class="op">,</span> <span class="nam">map_inhib_pre</span><span class="op">,</span> <span class="nam">uFinal_pre</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span><span class="strut">&nbsp;</span></p>
<p id="t861" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t862" class="stm run hide_run">    <span class="key">def</span> <span class="nam">evolve_maps_both</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">durations</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t863" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t864" class="pln"><span class="str">        Evolve maps with pre- and postsaccadic shift.</span><span class="strut">&nbsp;</span></p>
<p id="t865" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t866" class="pln"><span class="str">            - fixs_y, fixs_y, durations: tuple of the shape (previous, current, next) fixation locations in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t867" class="pln"><span class="str">            - map_att_prev, map_inhib_prev [128x128]: previous maps</span><span class="strut">&nbsp;</span></p>
<p id="t868" class="pln"><span class="str">            - fix_density_map [128x128]: empirical fixation density of the image</span><span class="strut">&nbsp;</span></p>
<p id="t869" class="pln"><span class="str">            - nth: number of the fixation in the sequence</span><span class="strut">&nbsp;</span></p>
<p id="t870" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t871" class="pln"><span class="str">            - map_att, map_inhib, uFinal: attention-, inhibition-, and final map after the evolution</span><span class="strut">&nbsp;</span></p>
<p id="t872" class="pln"><span class="str">            - next_fix: tuple of coordinates for the next fixation in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t873" class="pln"><span class="str">            - LL: Likelihood of the next fixation</span><span class="strut">&nbsp;</span></p>
<p id="t874" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t875" class="stm run hide_run">        <span class="nam">duration_post_ph</span><span class="op">,</span> <span class="nam">duration_main_ph</span><span class="op">,</span> <span class="nam">duration_pre_ph</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_phase_times_both</span><span class="op">(</span><span class="nam">nth</span><span class="op">,</span> <span class="nam">durations</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t876" class="pln">        <span class="com"># both mechanisms</span><span class="strut">&nbsp;</span></p>
<p id="t877" class="stm run hide_run">        <span class="nam">skip_post</span> <span class="op">=</span> <span class="key">True</span> <span class="key">if</span> <span class="nam">duration_post_ph</span> <span class="op">==</span> <span class="num">0</span> <span class="key">else</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t878" class="stm run hide_run">        <span class="nam">skip_pre</span> <span class="op">=</span> <span class="key">True</span> <span class="key">if</span> <span class="nam">duration_pre_ph</span> <span class="op">==</span> <span class="num">0</span> <span class="key">else</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t879" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t880" class="pln">        <span class="com"># POST PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t881" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">skip_post</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t882" class="stm run hide_run">            <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_attention_gauss_post_shift</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t883" class="stm run hide_run">            <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_att_fixdens</span><span class="op">(</span><span class="nam">map_att</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t884" class="pln">            <span class="com"># map_att = self.differential_time_basic(duration_post_ph, map_att, map_att_prev, self.omegaAttention)</span><span class="strut">&nbsp;</span></p>
<p id="t885" class="stm run hide_run">            <span class="nam">map_att</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att</span><span class="op">(</span><span class="nam">durations</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">map_att</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">=</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">=</span><span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t886" class="stm run hide_run">            <span class="nam">map_att_prev</span> <span class="op">=</span> <span class="nam">map_att</span><span class="strut">&nbsp;</span></p>
<p id="t887" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t888" class="stm run hide_run">            <span class="nam">map_inhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_inhib_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t889" class="stm run hide_run">            <span class="nam">map_inhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">duration_post_ph</span><span class="op">,</span> <span class="nam">map_inhib</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t890" class="stm run hide_run">            <span class="nam">map_inhib_prev</span> <span class="op">=</span> <span class="nam">map_inhib</span><span class="strut">&nbsp;</span></p>
<p id="t891" class="pln">        <span class="com"># MAIN PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t892" class="stm run hide_run">        <span class="nam">durations_dummy</span> <span class="op">=</span> <span class="op">(</span><span class="key">None</span><span class="op">,</span> <span class="nam">duration_main_ph</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t893" class="stm run hide_run">        <span class="nam">map_att_main</span><span class="op">,</span> <span class="nam">map_inhib_main</span><span class="op">,</span> <span class="nam">uFinal_main</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps_main</span><span class="op">(</span><span class="nam">durations_dummy</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">map_att_prev</span><span class="op">,</span> <span class="nam">map_inhib_prev</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">,</span> <span class="nam">nth</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="nam">sim</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t894" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t895" class="pln">        <span class="com"># pick the next location</span><span class="strut">&nbsp;</span></p>
<p id="t896" class="stm run hide_run">        <span class="key">if</span> <span class="nam">sim</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t897" class="stm run hide_run">            <span class="nam">fixs_x</span> <span class="op">=</span> <span class="op">(</span><span class="op">*</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t898" class="stm run hide_run">            <span class="nam">fixs_y</span> <span class="op">=</span> <span class="op">(</span><span class="op">*</span><span class="nam">fixs_y</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t899" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t900" class="pln">        <span class="com"># PRE PHASE</span><span class="strut">&nbsp;</span></p>
<p id="t901" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">skip_pre</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t902" class="pln">            <span class="com"># get gauss centered around the upcoming location</span><span class="strut">&nbsp;</span></p>
<p id="t903" class="stm run hide_run">            <span class="nam">map_att_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_attention_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t904" class="stm run hide_run">            <span class="nam">map_att_shift</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine_att_fixdens</span><span class="op">(</span><span class="nam">map_att_shift</span><span class="op">,</span> <span class="nam">fix_density_map</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t905" class="pln">            <span class="com"># no locdep decay on fix nr 1</span><span class="strut">&nbsp;</span></p>
<p id="t906" class="stm run hide_run">            <span class="key">if</span> <span class="nam">nth</span> <span class="op">!=</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t907" class="stm run hide_run">                <span class="nam">map_att_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_att</span><span class="op">(</span><span class="nam">duration_pre_ph</span><span class="op">,</span> <span class="nam">map_att_shift</span><span class="op">,</span> <span class="nam">map_att_main</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">=</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">=</span><span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t908" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t909" class="stm run hide_run">                <span class="nam">map_att_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">duration_pre_ph</span><span class="op">,</span> <span class="nam">map_att_shift</span><span class="op">,</span> <span class="nam">map_att_main</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaAttention</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t910" class="stm run hide_run">            <span class="nam">map_inhib_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_inhib_gauss</span><span class="op">(</span><span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t911" class="stm run hide_run">            <span class="nam">map_inhib_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">differential_time_basic</span><span class="op">(</span><span class="nam">duration_pre_ph</span><span class="op">,</span> <span class="nam">map_inhib_pre</span><span class="op">,</span> <span class="nam">map_inhib_main</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">omegaInhib</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t912" class="stm run hide_run">            <span class="nam">u</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combine</span><span class="op">(</span><span class="nam">map_att_pre</span><span class="op">,</span> <span class="nam">map_inhib_pre</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t913" class="stm run hide_run">            <span class="nam">ustar</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">make_positive</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t914" class="stm run hide_run">            <span class="nam">uFinal_pre</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">add_noise</span><span class="op">(</span><span class="nam">ustar</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t915" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t916" class="stm run hide_run">            <span class="nam">uFinal_pre</span> <span class="op">=</span> <span class="nam">uFinal_main</span><span class="strut">&nbsp;</span></p>
<p id="t917" class="stm run hide_run">            <span class="nam">map_inhib_pre</span> <span class="op">=</span> <span class="nam">map_inhib_main</span><span class="strut">&nbsp;</span></p>
<p id="t918" class="stm run hide_run">            <span class="nam">map_att_pre</span> <span class="op">=</span> <span class="nam">map_att_main</span><span class="strut">&nbsp;</span></p>
<p id="t919" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t920" class="pln">        <span class="com"># we return the state of after the presaccadic shift but the LL and picked fixation from before</span><span class="strut">&nbsp;</span></p>
<p id="t921" class="stm run hide_run">        <span class="key">return</span> <span class="nam">map_att_pre</span><span class="op">,</span> <span class="nam">map_inhib_pre</span><span class="op">,</span> <span class="nam">uFinal_pre</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span><span class="strut">&nbsp;</span></p>
<p id="t922" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t923" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t924" class="pln">    <span class="com"># Main Interface Functions</span><span class="strut">&nbsp;</span></p>
<p id="t925" class="pln">    <span class="com"># ------------------------------------------------------------------------------------------------------------------</span><span class="strut">&nbsp;</span></p>
<p id="t926" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_scanpath_likelihood</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">x_path</span><span class="op">,</span> <span class="nam">y_path</span><span class="op">,</span> <span class="nam">dur_path</span><span class="op">,</span> <span class="nam">fix_dens</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t927" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t928" class="pln"><span class="str">        calculate likelihood of one scanpath under scenewalk model with params in scene_walk_params.</span><span class="strut">&nbsp;</span></p>
<p id="t929" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t930" class="pln"><span class="str">            - x_path, y_path, dur_path: vectors of the same length, with a datapoint for each fixation for x and y coordinates and duration</span><span class="strut">&nbsp;</span></p>
<p id="t931" class="pln"><span class="str">            - fix_dens: empirical fixation density of the viewed image</span><span class="strut">&nbsp;</span></p>
<p id="t932" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t933" class="pln"><span class="str">            - average log likelihood of the scanpath (avg because scanpaths are different lengths)</span><span class="strut">&nbsp;</span></p>
<p id="t934" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t935" class="stm run hide_run">        <span class="nam">log_ll</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t936" class="pln">        <span class="com"># initializations</span><span class="strut">&nbsp;</span></p>
<p id="t937" class="stm run hide_run">        <span class="nam">mapAtt</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t938" class="stm run hide_run">        <span class="nam">mapInhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initialize_map_unif</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t939" class="pln">        <span class="com"># iterate over all fixations</span><span class="strut">&nbsp;</span></p>
<p id="t940" class="stm run hide_run">        <span class="nam">x_iter</span><span class="op">,</span> <span class="nam">y_iter</span><span class="op">,</span> <span class="nam">dur_iter</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">window</span><span class="op">(</span><span class="nam">x_path</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">window</span><span class="op">(</span><span class="nam">y_path</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">window</span><span class="op">(</span><span class="nam">dur_path</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t941" class="stm run hide_run">        <span class="nam">i_fix</span> <span class="op">=</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t942" class="pln">        <span class="com"># we're always evaluating the next fixation, so the last fixation's map is useless</span><span class="strut">&nbsp;</span></p>
<p id="t943" class="stm run hide_run">        <span class="key">for</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">durs</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">x_iter</span><span class="op">,</span> <span class="nam">y_iter</span><span class="op">,</span> <span class="nam">dur_iter</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t944" class="pln">            <span class="com"># evolve map given fixation</span><span class="strut">&nbsp;</span></p>
<p id="t945" class="stm run hide_run">            <span class="nam">mapAtt</span><span class="op">,</span> <span class="nam">mapInhib</span><span class="op">,</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">LL</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps</span><span class="op">(</span><span class="nam">durs</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">mapAtt</span><span class="op">,</span> <span class="nam">mapInhib</span><span class="op">,</span> <span class="nam">fix_dens</span><span class="op">,</span> <span class="nam">i_fix</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t946" class="stm run hide_run">            <span class="nam">log_ll</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">LL</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t947" class="stm run hide_run">            <span class="nam">i_fix</span> <span class="op">+=</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t948" class="pln">        <span class="com"># average Log Likelihood: needs to be average and not sum because scanpaths have different lengths</span><span class="strut">&nbsp;</span></p>
<p id="t949" class="stm run hide_run">        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">isnan</span><span class="op">(</span><span class="nam">log_ll</span><span class="op">)</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t950" class="stm mis">            <span class="key">raise</span> <span class="nam">Exception</span><span class="op">(</span><span class="str">"LLs are Nan :( "</span><span class="op">+</span><span class="nam">self</span><span class="op">.</span><span class="nam">whoami</span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="str">" params "</span><span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">get_params</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t951" class="stm run hide_run">        <span class="nam">avg_log_ll</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="nam">log_ll</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t952" class="stm run hide_run">        <span class="key">return</span> <span class="nam">avg_log_ll</span><span class="strut">&nbsp;</span></p>
<p id="t953" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t954" class="stm run hide_run">    <span class="key">def</span> <span class="nam">simulate_scanpath</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dur_path</span><span class="op">,</span> <span class="nam">fix_dens</span><span class="op">,</span> <span class="nam">startpos</span><span class="op">,</span> <span class="nam">get_LL</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t955" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t956" class="pln"><span class="str">        Simulates a scanpath given durations.</span><span class="strut">&nbsp;</span></p>
<p id="t957" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t958" class="pln"><span class="str">            - dur_path: vector of durations with a datapoint for each fixation</span><span class="strut">&nbsp;</span></p>
<p id="t959" class="pln"><span class="str">            - fix_dens: empirical fixation density of the viewed image</span><span class="strut">&nbsp;</span></p>
<p id="t960" class="pln"><span class="str">            - startpos: beginning location for the scanpath in degrees</span><span class="strut">&nbsp;</span></p>
<p id="t961" class="pln"><span class="str">            - get_LL: whether to return the LL of the path</span><span class="strut">&nbsp;</span></p>
<p id="t962" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t963" class="pln"><span class="str">            - x_path, y_path, (LL_path): coordinates (and likelihoods) of the simulated scanpath</span><span class="strut">&nbsp;</span></p>
<p id="t964" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t965" class="stm run hide_run">        <span class="nam">ll_path</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t966" class="stm run hide_run">        <span class="nam">x_path</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t967" class="stm run hide_run">        <span class="nam">y_path</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t968" class="pln">        <span class="com"># initializations</span><span class="strut">&nbsp;</span></p>
<p id="t969" class="stm run hide_run">        <span class="nam">mapAtt</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">att_map_init</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t970" class="stm run hide_run">        <span class="nam">mapInhib</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initialize_map_unif</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t971" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t972" class="stm run hide_run">        <span class="nam">i_fix</span> <span class="op">=</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t973" class="stm run hide_run">        <span class="nam">prev_x</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t974" class="stm run hide_run">        <span class="nam">prev_y</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t975" class="stm run hide_run">        <span class="nam">curr_x</span> <span class="op">=</span> <span class="nam">startpos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t976" class="stm run hide_run">        <span class="nam">curr_y</span> <span class="op">=</span> <span class="nam">startpos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t977" class="pln">        <span class="com"># we're always evaluating the next fixation, so the last fixation's map is useless</span><span class="strut">&nbsp;</span></p>
<p id="t978" class="stm run hide_run">        <span class="key">for</span> <span class="nam">durs</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">window</span><span class="op">(</span><span class="nam">dur_path</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t979" class="stm run hide_run">            <span class="nam">fixs_x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">prev_x</span><span class="op">,</span> <span class="nam">curr_x</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t980" class="stm run hide_run">            <span class="nam">fixs_y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">prev_y</span><span class="op">,</span> <span class="nam">curr_y</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t981" class="pln">            <span class="com"># evolve map given fixation</span><span class="strut">&nbsp;</span></p>
<p id="t982" class="stm run hide_run">            <span class="nam">mapAtt</span><span class="op">,</span> <span class="nam">mapInhib</span><span class="op">,</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">next_fix</span><span class="op">,</span> <span class="nam">LL</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">evolve_maps</span><span class="op">(</span><span class="nam">durs</span><span class="op">,</span> <span class="nam">fixs_x</span><span class="op">,</span> <span class="nam">fixs_y</span><span class="op">,</span> <span class="nam">mapAtt</span><span class="op">,</span> <span class="nam">mapInhib</span><span class="op">,</span> <span class="nam">fix_dens</span><span class="op">,</span> <span class="nam">i_fix</span><span class="op">,</span> <span class="nam">sim</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t983" class="stm run hide_run">            <span class="nam">i_fix</span> <span class="op">+=</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t984" class="stm run hide_run">            <span class="nam">x_path</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">curr_x</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t985" class="stm run hide_run">            <span class="nam">y_path</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">curr_y</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t986" class="stm run hide_run">            <span class="nam">prev_x</span><span class="op">,</span> <span class="nam">prev_y</span> <span class="op">=</span> <span class="nam">curr_x</span><span class="op">,</span> <span class="nam">curr_y</span><span class="strut">&nbsp;</span></p>
<p id="t987" class="stm run hide_run">            <span class="nam">curr_x</span><span class="op">,</span> <span class="nam">curr_y</span> <span class="op">=</span> <span class="nam">next_fix</span><span class="strut">&nbsp;</span></p>
<p id="t988" class="stm run hide_run">            <span class="nam">ll_path</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">LL</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t989" class="stm run hide_run">        <span class="key">if</span> <span class="nam">get_LL</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t990" class="stm run hide_run">            <span class="key">return</span> <span class="nam">x_path</span><span class="op">,</span> <span class="nam">y_path</span><span class="op">,</span> <span class="nam">np</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="nam">ll_path</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t991" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t992" class="stm mis">            <span class="key">return</span> <span class="nam">x_path</span><span class="op">,</span> <span class="nam">y_path</span><span class="strut">&nbsp;</span></p>
<p id="t993" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t994" class="stm run hide_run">    <span class="key">def</span> <span class="nam">window</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">iterable</span><span class="op">,</span> <span class="nam">n_before</span><span class="op">=</span><span class="num">1</span><span class="op">,</span> <span class="nam">n_after</span><span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t995" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t996" class="pln"><span class="str">        Sliding window iterator. Returns each element and it's neighbors. None neighbors returned at beginning and end.</span><span class="strut">&nbsp;</span></p>
<p id="t997" class="pln"><span class="str">        Inputs:</span><span class="strut">&nbsp;</span></p>
<p id="t998" class="pln"><span class="str">            - list or other kind of iterable</span><span class="strut">&nbsp;</span></p>
<p id="t999" class="pln"><span class="str">        Ourputs:</span><span class="strut">&nbsp;</span></p>
<p id="t1000" class="pln"><span class="str">            - iterator that returns each value in the list and it's surrounding n</span><span class="strut">&nbsp;</span></p>
<p id="t1001" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1002" class="stm run hide_run">        <span class="nam">size</span> <span class="op">=</span> <span class="nam">n_before</span> <span class="op">+</span> <span class="nam">n_after</span> <span class="op">+</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t1003" class="stm run hide_run">        <span class="nam">none_vals_before</span> <span class="op">=</span> <span class="op">[</span><span class="key">None</span><span class="op">]</span> <span class="op">*</span> <span class="nam">n_before</span><span class="strut">&nbsp;</span></p>
<p id="t1004" class="stm run hide_run">        <span class="nam">none_vals_after</span> <span class="op">=</span> <span class="op">[</span><span class="key">None</span><span class="op">]</span> <span class="op">*</span> <span class="nam">n_after</span><span class="strut">&nbsp;</span></p>
<p id="t1005" class="stm run hide_run">        <span class="nam">i</span> <span class="op">=</span> <span class="nam">iter</span><span class="op">(</span><span class="op">[</span><span class="op">*</span><span class="nam">none_vals_before</span><span class="op">,</span> <span class="op">*</span><span class="nam">iterable</span><span class="op">,</span> <span class="op">*</span><span class="nam">none_vals_after</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1006" class="stm run hide_run">        <span class="nam">win</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1007" class="stm run hide_run">        <span class="key">for</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="nam">size</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1008" class="stm run hide_run">            <span class="nam">win</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">next</span><span class="op">(</span><span class="nam">i</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1009" class="stm run hide_run">        <span class="key">yield</span> <span class="nam">win</span><span class="strut">&nbsp;</span></p>
<p id="t1010" class="stm run hide_run">        <span class="key">for</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">i</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1011" class="stm run hide_run">            <span class="nam">win</span> <span class="op">=</span> <span class="nam">win</span><span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="op">]</span> <span class="op">+</span> <span class="op">[</span><span class="nam">e</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1012" class="stm run hide_run">            <span class="key">yield</span> <span class="nam">win</span><span class="strut">&nbsp;</span></p>

            </td>
        </tr>
    </table>
</div>

<div id="footer">
    <div class="content">
        <p>
            <a class="nav" href="index.html">&#xab; index</a> &nbsp; &nbsp; <a class="nav" href="https://coverage.readthedocs.io">coverage.py v4.5.2</a>,
            created at 2019-05-27 14:54
        </p>
    </div>
</div>

</body>
</html>
