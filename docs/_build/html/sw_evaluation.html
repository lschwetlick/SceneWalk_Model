

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Evaluation &mdash; SceneWalk  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom_style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Estimation" href="sw_estimation.html" />
    <link rel="prev" title="The SceneWalk Model Object" href="sw_core.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/sw_logo2.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Using the SceneWalk Package</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_requirements.html">Data Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo/how_to_sw.html">Using the SceneWalk Model</a></li>
</ul>
<p class="caption"><span class="caption-text">Core Model Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo/detailed_look_at_sw.html">Detailed Look at the SceneWalk Code in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_core.html">The SceneWalk Model Object</a></li>
</ul>
<p class="caption"><span class="caption-text">Evaluation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-scenewalk.evaluation.evaluate_sw_parallel">Full Estimation Doc</a></li>
</ul>
<p class="caption"><span class="caption-text">Estimation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sw_estimation.html">Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_estimation.html#example-estimation-script">Example Estimation Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_estimation.html#module-scenewalk.estimation.DREAM_param_estimation">Full Estimation Doc</a></li>
</ul>
<p class="caption"><span class="caption-text">Simulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sw_simulation.html">Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_simulation.html#example-simulation">Example Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_simulation.html#module-scenewalk.simulation.simulate_dataset">Full Simulation Doc</a></li>
</ul>
<p class="caption"><span class="caption-text">Plotting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sw_plotting.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_plotting.html#example-dynamic-visualization">Example: Dynamic Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_plotting.html#module-scenewalk.plotting.sw_plot">Full Plotting Doc</a></li>
</ul>
<p class="caption"><span class="caption-text">Utils</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sw_utils.html">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_utils.html#loaddata">loadData</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_utils.html#id1">utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="sw_utils.html#resort">resort</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SceneWalk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Evaluation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sw_evaluation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="evaluation">
<span id="sw-evaluation"></span><h1>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h1>
<p>This module is for paralellizing likelihood estimation using the model. When getting the model likelihood for large data sets or when computing it many times it may be beneficial to paralellize the get_scanpath_likelihood function.
This paralellized evaluateion of the model can happen at the level of subjects (run each on different cores) and/or at the level of trials (split trials into groups and run these groups in parallel).</p>
<p>´num_processes_subj´ is the number of processes between which the subjects are split.
´num_processes_trials´ is the number of processes within each subject, i.e. the number of cores the trials are spread onto.</p>
<p>The main relevant function to call from the outside is</p>
<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.get_neg_tot_like_parallel">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">get_neg_tot_like_parallel</code><span class="sig-paren">(</span><em class="sig-param">sw_model</em>, <em class="sig-param">x_dat</em>, <em class="sig-param">y_dat</em>, <em class="sig-param">dur_dat</em>, <em class="sig-param">im_dat</em>, <em class="sig-param">densities_dat</em>, <em class="sig-param">num_processes_subjs</em>, <em class="sig-param">num_processes_trials=1</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.get_neg_tot_like_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Scenewalk evaluation parallelized by subject. This is what you call from
the outside giving it a list of people</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sw_model</strong><span class="classifier">scenewalk model object</span></dt><dd><p>scenewalk model object</p>
</dd>
<dt><strong>x_dat, y_dat, dur_dat, im_dat</strong><span class="classifier">arrays</span></dt><dd><p>data of shape subject[trial[path[]]] either of whole dataset or of a
subset (trials running in one pool)</p>
</dd>
<dt><strong>densities_dat</strong><span class="classifier">array</span></dt><dd><p>empirical densities</p>
</dd>
<dt><strong>num_processes_subjs</strong><span class="classifier">int</span></dt><dd><p>number of cores to parallelize the model evaluation over. Max: number of
subjects in the given dataset</p>
</dd>
<dt><strong>num_processes_trials</strong><span class="classifier">int</span></dt><dd><p>number of cores to parallelize the model evaluation over. Max: number of
trials in the given dataset</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>float</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-scenewalk.evaluation.evaluate_sw_parallel">
<span id="full-estimation-doc"></span><h1>Full Estimation Doc<a class="headerlink" href="#module-scenewalk.evaluation.evaluate_sw_parallel" title="Permalink to this headline">¶</a></h1>
<p>Get scenewalk log likelihood of dataset using paralellization
Lisa Schwetlick 2019
University of Potsdam</p>
<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.do_multiprocess_subjs">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">do_multiprocess_subjs</code><span class="sig-paren">(</span><em class="sig-param">function_args</em>, <em class="sig-param">num_processes</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.do_multiprocess_subjs" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens pool of workers for parallelization</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>function_args</strong><span class="classifier">list</span></dt><dd><p>list of args to pass to Estimation</p>
</dd>
<dt><strong>num_processes</strong><span class="classifier">int</span></dt><dd><p>how many pararell processes we want to run for subjects (between subj)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>list</dt><dd><p>results_list: total sum for evaluation on dataset</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.do_multiprocess_trials">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">do_multiprocess_trials</code><span class="sig-paren">(</span><em class="sig-param">function_args</em>, <em class="sig-param">num_processes</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.do_multiprocess_trials" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens pool of workers for parallelization</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>function_args</strong><span class="classifier">list</span></dt><dd><p>list of args to pass to Estimation</p>
</dd>
<dt><strong>num_processes</strong><span class="classifier">int</span></dt><dd><p>how many pararell processes we want to run for trials (within subj)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>list</dt><dd><p>results_list: total sum for evaluation on dataset</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">get_neg_tot_like_parallel</code><span class="sig-paren">(</span><em class="sig-param">sw_model</em>, <em class="sig-param">x_dat</em>, <em class="sig-param">y_dat</em>, <em class="sig-param">dur_dat</em>, <em class="sig-param">im_dat</em>, <em class="sig-param">densities_dat</em>, <em class="sig-param">num_processes_subjs</em>, <em class="sig-param">num_processes_trials=1</em><span class="sig-paren">)</span></dt>
<dd><p>Scenewalk evaluation parallelized by subject. This is what you call from
the outside giving it a list of people</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sw_model</strong><span class="classifier">scenewalk model object</span></dt><dd><p>scenewalk model object</p>
</dd>
<dt><strong>x_dat, y_dat, dur_dat, im_dat</strong><span class="classifier">arrays</span></dt><dd><p>data of shape subject[trial[path[]]] either of whole dataset or of a
subset (trials running in one pool)</p>
</dd>
<dt><strong>densities_dat</strong><span class="classifier">array</span></dt><dd><p>empirical densities</p>
</dd>
<dt><strong>num_processes_subjs</strong><span class="classifier">int</span></dt><dd><p>number of cores to parallelize the model evaluation over. Max: number of
subjects in the given dataset</p>
</dd>
<dt><strong>num_processes_trials</strong><span class="classifier">int</span></dt><dd><p>number of cores to parallelize the model evaluation over. Max: number of
trials in the given dataset</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>float</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.get_neg_tot_like_trials_parallel">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">get_neg_tot_like_trials_parallel</code><span class="sig-paren">(</span><em class="sig-param">sw_model</em>, <em class="sig-param">x_dat</em>, <em class="sig-param">y_dat</em>, <em class="sig-param">dur_dat</em>, <em class="sig-param">im_dat</em>, <em class="sig-param">densities_dat</em>, <em class="sig-param">num_processes</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.get_neg_tot_like_trials_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Scenewalk evaluation parallelized by subject. Call this function from the
outside by giving it one person’s trials.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sw_model</strong><span class="classifier">scenewalk model object</span></dt><dd><p>scenewalk model object</p>
</dd>
<dt><strong>x_dat, y_dat, dur_dat, im_dat</strong><span class="classifier">arrays</span></dt><dd><p>data of shape subject[trial[path[]]] either of whole dataset or of a
subset (trials running in one pool)</p>
</dd>
<dt><strong>densities_dat</strong><span class="classifier">array</span></dt><dd><p>empirical densities</p>
</dd>
<dt><strong>num_processes</strong><span class="classifier">int</span></dt><dd><p>number of cores to parallelize the model trial evaluation over</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>list</dt><dd><p>results_list: total sum for evaluation on dataset</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.get_total_list_LL_trials">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">get_total_list_LL_trials</code><span class="sig-paren">(</span><em class="sig-param">sw_model</em>, <em class="sig-param">x_dat</em>, <em class="sig-param">y_dat</em>, <em class="sig-param">dur_dat</em>, <em class="sig-param">im_dat</em>, <em class="sig-param">densities_dat</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.get_total_list_LL_trials" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives a list containing a LL for each scanpath</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sw_model</strong><span class="classifier">scenewalk model object</span></dt><dd><p>scenewalk model object</p>
</dd>
<dt><strong>x_dat, y_dat, dur_dat, im_dat</strong><span class="classifier">arrays</span></dt><dd><p>data of shape subject[trial[path[]]] either of whole dataset or of a
subset (trials running in one pool)</p>
</dd>
<dt><strong>densities_dat</strong><span class="classifier">array</span></dt><dd><p>empirical densities</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>array</dt><dd><p>list of LLs for evaluation on subdataset</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.get_total_neg_LL_per_subj">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">get_total_neg_LL_per_subj</code><span class="sig-paren">(</span><em class="sig-param">sw_model</em>, <em class="sig-param">x_dat_sub</em>, <em class="sig-param">y_dat_sub</em>, <em class="sig-param">dur_dat_sub</em>, <em class="sig-param">im_dat_sub</em>, <em class="sig-param">densities_dat</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.get_total_neg_LL_per_subj" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all images one subject saw and returns the negative Log
Likelihood given parameters. (Linear)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sw_model</strong><span class="classifier">scenewalk model object</span></dt><dd><p>scenewalk model object</p>
</dd>
<dt><strong>x_dat, y_dat, dur_dat, im_dat</strong><span class="classifier">arrays</span></dt><dd><p>data of shape subject[trial[path[]]] either of whole dataset or of a
subset (trials running in one pool)</p>
</dd>
<dt><strong>densities_dat</strong><span class="classifier">array</span></dt><dd><p>empirical densities</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>float</dt><dd><p>negative sum of likelihoods of all trials in a subject</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.get_total_neg_LL_subjs">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">get_total_neg_LL_subjs</code><span class="sig-paren">(</span><em class="sig-param">sw_model</em>, <em class="sig-param">x_dat</em>, <em class="sig-param">y_dat</em>, <em class="sig-param">dur_dat</em>, <em class="sig-param">im_dat</em>, <em class="sig-param">densities_dat</em>, <em class="sig-param">num_processes_trials</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.get_total_neg_LL_subjs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls get_total_neg_LL_per_subj() for every subject and returns the sum</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sw_model</strong><span class="classifier">scenewalk model object</span></dt><dd><p>scenewalk model object</p>
</dd>
<dt><strong>x_dat, y_dat, dur_dat, im_dat</strong><span class="classifier">arrays</span></dt><dd><p>data of shape subject[trial[path[]]] either of whole dataset or of a
subset (trials running in one pool)</p>
</dd>
<dt><strong>densities_dat</strong><span class="classifier">array</span></dt><dd><p>empirical densities</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>float</dt><dd><p>total sum for evaluation on subdataset</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.multi_process_like_subjs">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">multi_process_like_subjs</code><span class="sig-paren">(</span><em class="sig-param">args</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.multi_process_like_subjs" title="Permalink to this definition">¶</a></dt>
<dd><p>unpack args to multi process function</p>
</dd></dl>

<dl class="function">
<dt id="scenewalk.evaluation.evaluate_sw_parallel.multi_process_like_trials">
<code class="sig-prename descclassname">scenewalk.evaluation.evaluate_sw_parallel.</code><code class="sig-name descname">multi_process_like_trials</code><span class="sig-paren">(</span><em class="sig-param">args</em><span class="sig-paren">)</span><a class="headerlink" href="#scenewalk.evaluation.evaluate_sw_parallel.multi_process_like_trials" title="Permalink to this definition">¶</a></dt>
<dd><p>unpack args to multi process function</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sw_estimation.html" class="btn btn-neutral float-right" title="Estimation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sw_core.html" class="btn btn-neutral float-left" title="The SceneWalk Model Object" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Lisa Schwetlick

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>